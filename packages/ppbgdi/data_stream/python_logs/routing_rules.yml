# Route container logs events to the correct dataset and namespace
# based on service-name.
- source_dataset: ppbgdi.python_logs
  rules:
    - target_dataset: ppbgdi.service_wmts_logs
      if: ctx?.service?.name != null && ctx?.service?.name == 'service-wmts'
      namespace:
        - "{{data_stream.namespace}}"
        - default
    - target_dataset: ppbgdi.service_stac_logs
      if: ctx?.service?.name != null && ctx?.service?.name == 'service-stac'
      namespace:
        - "{{data_stream.namespace}}"
        - default
    - target_dataset: ppbgdi.mf_chsdi3_logs
      if: ctx?.service?.name != null && ctx?.service?.name == 'mf-chsdi3'
      namespace:
        - "{{data_stream.namespace}}"
        - default
