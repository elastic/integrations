format_version: 2.9.0
name: sql
title: "SQL Input"
version: "0.8.0"
description: "Collects Metrics by querying SQL Databases"
type: input
categories:
  - custom
  - observability
conditions:
  kibana:
    version: "^9.1.0"
  elastic:
    subscription: "basic"
icons:
  - src: /img/sql-server-icon.svg
    title: SQL logo
    size: 32x32
    type: image/svg+xml
policy_templates:
  - name: sql
    type: metrics
    title: SQL Metrics
    description: Collects Metrics by querying SQL Databases
    input: sql/metrics
    template_path: input.yml.hbs
    vars:
      - name: hosts
        type: password
        title: Hosts
        multi: true
        secret: true
        required: true
        show_user: true
        default:
          - root:test@tcp(127.0.0.1:3306)/
      - name: period
        type: text
        title: Period
        default: 10s
      - name: driver
        type: text
        title: Driver
        multi: false
        required: true
        show_user: true
        default: "mysql"
      - name: sql_queries
        type: yaml
        title: SQL Queries
        multi: false
        required: true
        show_user: true
        default: "- query: SHOW GLOBAL STATUS LIKE 'Innodb_system%'\n  response_format: variables\n        \n"
      - name: merge_results
        type: bool
        title: Merge Results
        multi: false
        required: false
        show_user: false
        default: false
        description: Merge results from multiple queries to a single event (restrictions apply)
      - name: ssl
        type: yaml
        title: SSL Configuration
        default: |
          # ssl.certificate_authorities: |
          #   -----BEGIN CERTIFICATE-----
          #   MIID+jCCAuKgAwIBAgIGAJJMzlxLMA0GCSqGSIb3DQEBCwUAMHoxCzAJBgNVBAYT
          #   AlVTMQwwCgYDVQQKEwNJQk0xFjAUBgNVBAsTDURlZmF1bHROb2RlMDExFjAUBgNV
          #   BAsTDURlZmF1bHRDZWxsMDExGTAXBgNVBAsTEFJvb3QgQ2VydGlmaWNhdGUxEjAQ
          #   BgNVBAMTCWxvY2FsaG9zdDAeFw0yMTEyMTQyMjA3MTZaFw0yMjEyMTQyMjA3MTZa
          #   MF8xCzAJBgNVBAYTAlVTMQwwCgYDVQQKEwNJQk0xFjAUBgNVBAsTDURlZmF1bHRO
          #   b2RlMDExFjAUBgNVBAsTDURlZmF1bHRDZWxsMDExEjAQBgNVBAMTCWxvY2FsaG9z
          #   dDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMv5HCsJZIpI5zCy+jXV
          #   z6lmzNc9UcVSEEHn86h6zT6pxuY90TYeAhlZ9hZ+SCKn4OQ4GoDRZhLPTkYDt+wW
          #   CV3NTIy9uCGUSJ6xjCKoxClJmgSQdg5m4HzwfY4ofoEZ5iZQ0Zmt62jGRWc0zuxj
          #   hegnM+eO2reBJYu6Ypa9RPJdYJsmn1RNnC74IDY8Y95qn+WZj//UALCpYfX41hko
          #   i7TWD9GKQO8SBmAxhjCDifOxVBokoxYrNdzESl0LXvnzEadeZTd9BfUtTaBHhx6t
          #   njqqCPrbTY+3jAbZFd4RiERPnhLVKMytw5ot506BhPrUtpr2lusbN5svNXjuLeea
          #   MMUCAwEAAaOBoDCBnTATBgNVHSMEDDAKgAhOatpLwvJFqjAdBgNVHSUEFjAUBggr
          #   BgEFBQcDAQYIKwYBBQUHAwIwVAYDVR0RBE0wS4E+UHJvZmlsZVVVSUQ6QXBwU3J2
          #   MDEtQkFTRS05MDkzMzJjMC1iNmFiLTQ2OTMtYWI5NC01Mjc1ZDI1MmFmNDiCCWxv
          #   Y2FsaG9zdDARBgNVHQ4ECgQITzqhA5sO8O4wDQYJKoZIhvcNAQELBQADggEBAKR0
          #   gY/BM69S6BDyWp5dxcpmZ9FS783FBbdUXjVtTkQno+oYURDrhCdsfTLYtqUlP4J4
          #   CHoskP+MwJjRIoKhPVQMv14Q4VC2J9coYXnePhFjE+6MaZbTjq9WaekGrpKkMaQA
          #   iQt5b67jo7y63CZKIo9yBvs7sxODQzDn3wZwyux2vPegXSaTHR/rop/s/mPk3YTS
          #   hQprs/IVtPoWU4/TsDN3gIlrAYGbcs29CAt5q9MfzkMmKsuDkTZD0ry42VjxjAmk
          #   xw23l/k8RoD1wRWaDVbgpjwSzt+kl+vJE/ip2w3h69eEZ9wbo6scRO5lCO2JM4Pr
          #   7RhLQyWn2u00L7/9Omw=
          #   -----END CERTIFICATE-----
        description: SSL configuration options. See [documentation](https://www.elastic.co/docs/reference/integrations/sql) for details.
        multi: false
        required: false
        show_user: false
      - name: condition
        title: Condition
        description: Condition to filter when to apply this datastream. Refer to [Conditions](https://www.elastic.co/guide/en/fleet/current/dynamic-input-configuration.html#conditions) on how to use the available keys in conditions.
        type: text
        multi: false
        required: false
        show_user: false
      - name: processors
        type: yaml
        title: Processors
        multi: false
        required: false
        show_user: false
        description: >-
          Processors are used to reduce the number of fields in the exported event or to enhance the event with metadata. This executes in the agent before the events are shipped. See [Processors](https://www.elastic.co/guide/en/fleet/current/elastic-agent-processor-configuration.html) for details.
owner:
  github: elastic/obs-infraobs-integrations
