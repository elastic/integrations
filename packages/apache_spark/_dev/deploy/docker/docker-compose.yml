version: '2'
services:
  apache_spark:
    hostname: apachesparkmaster
    build:
      context: ./Dockerfiles
      dockerfile: Dockerfile-master
    environment:
      - SPARK_MODE=master
      - SPARK_RPC_AUTHENTICATION_ENABLED=no
      - SPARK_RPC_ENCRYPTION_ENABLED=no
      - SPARK_LOCAL_STORAGE_ENCRYPTION_ENABLED=no
      - SPARK_SSL_ENABLED=no
      - SPARK_MASTER_OPTS="-javaagent:/usr/share/java/jolokia-agent.jar=config=/spark/conf/jolokia-master.properties"
    ports:
      - 7777
      - 8088
      - 7077
    volumes:
      - ./jolokia-configs/master:/spark/conf/:rw
