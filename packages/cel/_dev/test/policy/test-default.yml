vars:
  url: http://example.com:9001
  program: |-
    get("https://api.ipify.org/?format=json").Body.as(body, {
        "events": [body.decode_json().with({
            ?"last_requested_at": state.?cursor.last_requested_at
        })],
        "cursor": {"last_requested_at": now}
    })
  interval: 5m
  preserve_original_event: true
  preserve_duplicate_custom_fields: true
