vars:
  # NODE_NAME is the variable created in the elastic-package for the elastic-agent
  # https://github.com/elastic/elastic-package/blob/fcbd2fb0c509c9c70989d6b6d6b0ba5122a6de28/internal/agentdeployer/_static/elastic-agent-managed.yaml.tmpl#L58
  endpoint: https://${env:NODE_NAME}:10250
  auth_type: serviceAccount
  collection_interval: 5s
  insecure_skip_verify: true
  # Pending https://github.com/elastic/elastic-package/pull/3259 to be merged and released,
  # we need to set `extra_metadata_labels` to an empty array to avoid the following errors:
  # "message": "call to /pods endpoint failed",
  # "error":{"message":"kubelet request GET https://:10250/pods failed - \"403 Forbidden\", response: \"Forbidden (user=system:serviceaccount:kube-system:elastic-agent-74739, verb=get, resource=nodes, subresource(s)=[pods proxy])\\n\""}
  extra_metadata_labels: []

assert:
  min_count: 50
