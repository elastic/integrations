version: '2.3'
services:
  barracuda-cloudgen-lumberjack:
    image: docker.elastic.co/beats/filebeat:8.3.3
    environment:
      - BEAT_STRICT_PERMS=false
    volumes:
      - ./sample_logs:/sample_logs:ro
      - ./config:/config:ro
    command: /bin/sh -c "while (filebeat -c /config/filebeat.docker.yml test output); [ $$? -ne 0 ]; do echo ''; done  && filebeat -c /config/filebeat.docker.yml -e -d '*'"
