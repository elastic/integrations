# - name: package_registry.*.*
#   dynamic: true
#   description: Package Registry telemetry data from the Prometheus endpoint.
- name: package_registry.labels
  type: group
  fields:
    - name: job
      type: keyword
    - name: instance
      type: keyword
      description: Elastic Package Registry instance
    - name: component
      type: keyword
      description: Component type of the storage (statics, artifacts, signature...)
    - name: location
      type: keyword
      description: Storage location (remote or local)
    - name: code
      type: keyword
      description: HTTP Code
    - name: method
      type: keyword
      description: HTTP method
    - name: path
      type: keyword
      description: Path of the HTTP request.
- name: package_registry.epr_http_requests_total.*
  type: object
  object_type: double
  object_type_mapping_type: "*"
  description: >
    Counter for requests to the http server

- name: package_registry.storage_requests_total.*
  type: object
  object_type: double
  object_type_mapping_type: "*"
  description: >
    Counter for requests performed to the storage

- name: package_registry.epr_http_request_duration_seconds.histogram
  type: object
  object_type: histogram
  object_type_mapping_type: "*"
  description: >
    A histogram of latencies for requests to the http server

- name: package_registry.epr_http_request_size_bytes.histogram
  type: object
  object_type: histogram
  object_type_mapping_type: "*"
  description: >
    A histogram of sizes of requests to the http server

- name: package_registry.epr_http_response_size_bytes.histogram
  type: object
  object_type: histogram
  object_type_mapping_type: "*"
  description: >
    A histogram of response sizes for requests to the http server

- name: package_registry.epr_in_flight_requests.value
  type: object
  object_type: double
  object_type_mapping_type: "*"
  description: >
    Requests currently being served by the http server

- name: package_registry.epr_number_indexed_packages.value
  type: object
  object_type: double
  object_type_mapping_type: "*"
  description: >
    Number of indexed packages

- name: package_registry.epr_service_info.value
  type: object
  object_type: double
  object_type_mapping_type: "*"
  description: >
    Version information about Elastic Package Registry

- name: package_registry.epr_storage_indexer_get_duration_seconds.histogram
  type: object
  object_type: histogram
  object_type_mapping_type: "*"
  description: >
    A histogram of latencies for get processes run by the indexer

- name: package_registry.epr_storage_indexer_update_index_duration_seconds.histogram
  type: object
  object_type: histogram
  object_type_mapping_type: "*"
  description: >
    A histogram of latencies for update index processes run by the indexer

- name: package_registry.epr_storage_indexer_update_index_error_total.*
  type: object
  object_type: double
  object_type_mapping_type: "*"
  description: >
    A counter for all the update index processes that finished with error

- name: package_registry.epr_storage_indexer_update_index_success_total.*
  type: object
  object_type: double
  object_type_mapping_type: "*"
  description: >
    A counter for all the update index processes that finished with error

- name: package_registry.process_cpu_seconds_total.*
  type: object
  object_type: double
  object_type_mapping_type: "*"
  description: >
    Total user and system CPU time spent in seconds

- name: package_registry.process_max_fds.value
  type: object
  object_type: double
  object_type_mapping_type: "*"
  description: >
    Maximum number of open file descriptors

- name: package_registry.process_open_fds.value
  type: object
  object_type: double
  object_type_mapping_type: "*"
  description: >
    Number of open file descriptors

- name: package_registry.process_resident_memory_bytes.value
  type: object
  object_type: double
  object_type_mapping_type: "*"
  description: >
    Resident memory size in bytes

- name: package_registry.process_start_time_seconds.value
  type: object
  object_type: double
  object_type_mapping_type: "*"
  description: >
    Start time of the process since unix epoch in seconds

- name: package_registry.process_virtual_memorty_bytes.value
  type: object
  object_type: double
  object_type_mapping_type: "*"
  description: >
    Virtual memory size in bytes

- name: package_registry.process_virtual_memorty_max_bytes.value
  type: object
  object_type: double
  object_type_mapping_type: "*"
  description: >
    Maximum amount of virtual memory available in bytes

