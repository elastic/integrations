---
description: Pipeline for renaming object
processors:
  - set:
      field: service.type
      value: elastic_package_registry
  - set:
      field: event.kind
      value: metric
  - rename:
      field: prometheus
      target_field: package_registry
      ignore_missing: true
  - rename:
      field: package_registry.epr_storage_indexer_get_duration_seconds
      target_field: package_registry.storage_indexer.get_duration_seconds
      ignore_missing: true
  - rename:
      field: package_registry.epr_storage_indexer_update_index_error_total
      target_field: package_registry.storage_indexer.update_index_error_total
      ignore_missing: true
  - rename:
      field: package_registry.epr_storage_indexer_update_index_success_total
      target_field: package_registry.storage_indexer.update_index_success_total
      ignore_missing: true
  - rename:
      field: package_registry.epr_storage_indexer_update_index_duration_seconds
      target_field: package_registry.storage_indexer.update_index_duration_seconds
      ignore_missing: true
on_failure:
  - set:
      field: error.message
      value: '{{ _ingest.on_failure_message }}'

