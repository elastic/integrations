format_version: 3.1.3
name: wmi
title: "WMI Input Package"
version: 0.0.1
source:
  license: "Elastic-2.0"
description: "WMI Input Package"
type: input
categories:
  - observability
conditions:
  kibana:
    version: "^8.19.0"
  elastic:
    subscription: "basic"
screenshots:
  - src: /img/sample-screenshot.png
    title: Sample screenshot
    size: 600x600
    type: image/png
icons:
  - src: /img/sample-logo.svg
    title: Sample logo
    size: 32x32
    type: image/svg+xml
policy_templates:
  - name: wmi
    type: metrics
    title: Collect the Windows metrics via WMI
    description: Collect the Windows metrics via WMI
    input: windows/metrics
    template_path: input.yml.hbs
    vars:
      - name: period
        type: text
        title: Period
        default: 60s
      - name: wmi.namespace
        type: text
        title: Namespace
        multi: false
        required: true
        show_user: true
        default: "root\\cimv2"
      - name: wmi.warning_threshold
        type: text
        title: Warning Threshold (TBD)
        multi: false
        required: false
        show_user: true
      - name: wmi.incude_null
        type: bool
        title: Include Null Properties
        description: >
          Whether to include the null properties in the final documents or not
        multi: false
        required: false
        default: false
      - name: wmi.include_queries
        type: bool
        title: Include Queries
        description: >
          Whether to include the queries in the final documents or not
        multi: false
        required: false
        default: false
      - name: wmi.include_empty_string
        type: bool
        title: Include Empty String
        description: >
          Whether to include empty string properties in the final documents or not
        multi: false
        required: false
        default: false
      - name: wmi.queries
        type: yaml
        title: WMI Queries
        multi: false
        required: true
        show_user: true
        default: |
         # - class: Win32_OperatingSystem
         #   fields:
         #   - FreePhysicalMemory
         #   - FreeSpaceInPagingFiles
         #   - NumberOfUsers
         #   where: ""
      - name: data_stream.dataset
        type: text
        title: 'Datastream Dataset name'
        description: Name of Datastream dataset
        multi: false
        default: wmi
        required: true
        show_user: true
      - name: processors
        type: yaml
        title: Processors
        multi: false
        required: false
        show_user: false
        description: >
          Processors are used to reduce the number of fields in the exported event or to enhance the event with metadata. This executes in the agent before the events are shipped. See [Processors](https://www.elastic.co/guide/en/fleet/current/elastic-agent-processor-configuration.html) for details.  
owner:
  github: elastic/obs-infraobs-integrations
  type: elastic
