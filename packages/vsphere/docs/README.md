# VMware vSphere Integration

## Overview

[vSphere](https://www.vmware.com/products/vsphere.html) is VMware's cloud computing virtualization platform, offering tools for managing virtualized data centers.

Use the vSphere integration to:

- Collect vSphere logs, along with datastore, host, and virtualmachine metrics for comprehensive monitoring and analysis.
- Create informative visualizations to track usage trends, measure key metrics, and derive actionable business insights.
- Set up alerts to minimize Mean Time to Detect (MTTD) and Mean Time to Resolve (MTTR) by quickly referencing relevant logs during troubleshooting.

## Data streams

The vSphere integration collects logs and metrics.

Logs help you keep a record of events that happen on your machine. The `Log` data stream collected by vSphere as integration is `log`.

Metrics give you insight into the statistics of the vSphere. The `Metric` data stream collected by the vSphere integration are `datastore`, `host` and `virtualmachine` so that the user can monitor and troubleshoot the performance of the vSphere instance.

Data streams:
- `log`: This data stream collects logs generated by VMware vSphere using a syslog daemon.
- `datastore`: This data stream collects datastore metrics from VMware vSphere, including performance statistics such as capacity, usage, read/write operations, latency, and throughput. These metrics are available in this data stream.
- `host`: This data stream collects host metrics from VMware vSphere, including performance statistics such as CPU usage, memory usage, disk I/O, and network activity. These metrics are available in this data stream.
- `virtualmachine`: This data stream collects virtual machine metrics from VMware vSphere, including performance statistics such as status, uptime, CPU usage, memory usage, and network activity. These metrics are available in this data stream.

Note:
- Users can monitor and see the log inside the ingested documents for vSphere in the `logs-*` index pattern from `Discover`, and for metrics, the index pattern is `metrics-*`.
- Real-time data collection â€“ An ESXi Server collects data for each performance counter every 20 seconds by default.
- Supported Periods:
- The Datastore and Host metricsets support performance data collection using the vSphere performance API.
- Since the performance API has usage restrictions based on data collection intervals,
- users should ensure that the period is configured optimally to receive real-time data.
- users can still collect summary metrics if performance metrics are not supported for the configured instance.
- This configuration can be determined based on the Data Collection Intervals and Data Collection Levels.
- Reference for [Data Collection Intervals](https://docs.vmware.com/en/VMware-vSphere/7.0/com.vmware.vsphere.monitoring.doc/GUID-247646EA-A04B-411A-8DD4-62A3DCFCF49B.html) and [Data Collection Levels](https://docs.vmware.com/en/VMware-vSphere/7.0/com.vmware.vsphere.monitoring.doc/GUID-25800DE4-68E5-41CC-82D9-8811E27924BC.html)

## Prerequisites

You can store and search your data using Elasticsearch and visualize and manage it with Kibana. We recommend using our hosted Elasticsearch Service on Elastic Cloud or self-managing the Elastic Stack on your own hardware.

## Compatibility

This integration supports VMware ESXi and vCenter versions 6.5, 6.7, 7.0, and 7.0.3. It has been tested and verified to work with these versions.

## Setup

For step-by-step instructions on how to set up an integration, see the [Getting started](https://www.elastic.co/guide/en/welcome-to-elastic/current/getting-started-observability.html) guide.

## Logs reference

### Log

This is the `log` data stream. This data stream collects logs generated by VMware vSphere using a syslog daemon.

Note:
- To collect logs, a syslog daemon is used. First, you must configure the listening host/IP address (default: localhost) and host port (default: 9525) in the integration. Then, configure vSphere to send logs to a remote syslog host and provide the configured hostname/IP and port of the Elastic Agent host.

An example event for `log` looks as following:

```json
{
    "@timestamp": "2021-09-06T14:40:05.753Z",
    "agent": {
        "ephemeral_id": "c4a1df82-7a9c-4a3e-8546-6d7cc04538e6",
        "id": "5096d7cc-1e4b-4959-abea-7355be2913a7",
        "name": "docker-fleet-agent",
        "type": "filebeat",
        "version": "8.8.1"
    },
    "data_stream": {
        "dataset": "vsphere.log",
        "namespace": "ep",
        "type": "logs"
    },
    "ecs": {
        "version": "8.11.0"
    },
    "elastic_agent": {
        "id": "5096d7cc-1e4b-4959-abea-7355be2913a7",
        "snapshot": false,
        "version": "8.8.1"
    },
    "event": {
        "agent_id_status": "verified",
        "dataset": "vsphere.log",
        "ingested": "2023-06-29T08:05:57Z",
        "original": "<14>1 2021-09-06T14:40:05.753710+00:00 vcenter applmgmt-audit - - -  2021-09-06T14:40:05.753: INFO AuthorizationResponse = { authorized=True, method=LOCAL }",
        "timezone": "+00:00"
    },
    "host": {
        "architecture": "aarch64",
        "containerized": false,
        "hostname": "docker-fleet-agent",
        "id": "d08b346fbb8f49f5a2bb1a477f8ceb54",
        "ip": [
            "172.23.0.7"
        ],
        "mac": [
            "02-42-AC-17-00-07"
        ],
        "name": "vcenter",
        "os": {
            "codename": "focal",
            "family": "debian",
            "kernel": "5.10.104-linuxkit",
            "name": "Ubuntu",
            "platform": "ubuntu",
            "type": "linux",
            "version": "20.04.6 LTS (Focal Fossa)"
        }
    },
    "input": {
        "type": "udp"
    },
    "log": {
        "level": "INFO",
        "source": {
            "address": "172.23.0.4:59146"
        },
        "syslog": {
            "priority": 14
        }
    },
    "message": "AuthorizationResponse = { authorized=True, method=LOCAL }",
    "process": {
        "name": "applmgmt-audit"
    },
    "tags": [
        "preserve_original_event",
        "vmware-sphere"
    ]
}
```

**ECS Field Reference**

Please refer to the following [document](https://www.elastic.co/guide/en/ecs/current/ecs-field-reference.html) for detailed information on ECS fields.

**Exported fields**

| Field | Description | Type |
|---|---|---|
| @timestamp | Event timestamp. | date |
| data_stream.dataset | Data stream dataset. | constant_keyword |
| data_stream.namespace | Data stream namespace. | constant_keyword |
| data_stream.type | Data stream type. | constant_keyword |
| event.dataset | Event dataset | constant_keyword |
| event.module | Event module | constant_keyword |
| host.containerized | If the host is a container. | boolean |
| host.os.build | OS build information. | keyword |
| host.os.codename | OS codename, if any. | keyword |
| hostname | Hostname from syslog header. | keyword |
| input.type | Type of Filebeat input. | keyword |
| log.source.address | Source address of the syslog message. | keyword |
| process.program | Process from syslog header. | keyword |
| vsphere.log.api.invocations |  | long |
| vsphere.log.datacenter |  | keyword |
| vsphere.log.file.path |  | keyword |


## Metrics reference

Note:
- To access the metrics, provide the URL <https://host:port/sdk> in the "Add Integration" page of the vSphere package.

### Datastore

This is `datastore` data stream. This data stream collects datastore metrics from VMware vSphere, including performance statistics such as capacity, usage, read/write operations, latency, and throughput.

An example event for `datastore` looks as following:

```json
{
    "@timestamp": "2023-06-29T08:03:30.114Z",
    "agent": {
        "ephemeral_id": "8b019ff3-cbda-41fa-b1ff-974d482b9694",
        "id": "5096d7cc-1e4b-4959-abea-7355be2913a7",
        "name": "docker-fleet-agent",
        "type": "metricbeat",
        "version": "8.8.1"
    },
    "data_stream": {
        "dataset": "vsphere.datastore",
        "namespace": "ep",
        "type": "metrics"
    },
    "ecs": {
        "version": "8.11.0"
    },
    "elastic_agent": {
        "id": "5096d7cc-1e4b-4959-abea-7355be2913a7",
        "snapshot": false,
        "version": "8.8.1"
    },
    "event": {
        "agent_id_status": "verified",
        "dataset": "vsphere.datastore",
        "duration": 23155458,
        "ingested": "2023-06-29T08:03:31Z",
        "module": "vsphere"
    },
    "host": {
        "architecture": "aarch64",
        "containerized": false,
        "hostname": "docker-fleet-agent",
        "id": "d08b346fbb8f49f5a2bb1a477f8ceb54",
        "ip": [
            "172.23.0.7"
        ],
        "mac": [
            "02-42-AC-17-00-07"
        ],
        "name": "docker-fleet-agent",
        "os": {
            "codename": "focal",
            "family": "debian",
            "kernel": "5.10.104-linuxkit",
            "name": "Ubuntu",
            "platform": "ubuntu",
            "type": "linux",
            "version": "20.04.6 LTS (Focal Fossa)"
        }
    },
    "metricset": {
        "name": "datastore",
        "period": 10000
    },
    "service": {
        "address": "https://elastic-package-service_vsphere-metrics_1:8989/sdk",
        "type": "vsphere"
    },
    "vsphere": {
        "datastore": {
            "capacity": {
                "free": {
                    "bytes": 47869427712
                },
                "total": {
                    "bytes": 62725623808
                },
                "used": {
                    "bytes": 14856196096,
                    "pct": 0.237
                }
            },
            "fstype": "OTHER",
            "name": "LocalDS_0"
        }
    }
}
```

**ECS Field Reference**

Please refer to the following [document](https://www.elastic.co/guide/en/ecs/current/ecs-field-reference.html) for detailed information on ECS fields.

**Exported fields**

| Field | Description | Type | Unit | Metric Type |
|---|---|---|---|---|
| @timestamp | Event timestamp. | date |  |  |
| agent.id |  | keyword |  |  |
| cloud.account.id | The cloud account or organization id used to identify different entities in a multi-tenant environment. Examples: AWS account id, Google Cloud ORG Id, or other unique identifier. | keyword |  |  |
| cloud.availability_zone | Availability zone in which this host, resource, or service is located. | keyword |  |  |
| cloud.instance.id | Instance ID of the host machine. | keyword |  |  |
| cloud.provider | Name of the cloud provider. Example values are aws, azure, gcp, or digitalocean. | keyword |  |  |
| cloud.region | Region in which this host, resource, or service is located. | keyword |  |  |
| container.id | Unique container id. | keyword |  |  |
| data_stream.dataset | Data stream dataset. | constant_keyword |  |  |
| data_stream.namespace | Data stream namespace. | constant_keyword |  |  |
| data_stream.type | Data stream type. | constant_keyword |  |  |
| event.dataset | Event dataset | constant_keyword |  |  |
| event.module | Event module | constant_keyword |  |  |
| host.containerized | If the host is a container. | boolean |  |  |
| host.name | Name of the host.  It can contain what `hostname` returns on Unix systems, the fully qualified domain name, or a name specified by the user. The sender decides which value to use. | keyword |  |  |
| host.os.build | OS build information. | keyword |  |  |
| host.os.codename | OS codename, if any. | keyword |  |  |
| service.address | Address where data about this service was collected from. This should be a URI, network address (ipv4:port or [ipv6]:port) or a resource path (sockets). | keyword |  |  |
| vsphere.datastore.capacity.free.bytes | Free bytes of the datastore. | long | byte | gauge |
| vsphere.datastore.capacity.total.bytes | Total bytes of the datastore. | long | byte | gauge |
| vsphere.datastore.capacity.used.bytes | Used bytes of the datastore. | long | byte | gauge |
| vsphere.datastore.capacity.used.pct | Percentage of datastore capacity used. | scaled_float | percent | gauge |
| vsphere.datastore.disk.capacity.bytes | Configured size of the datastore. | long |  | gauge |
| vsphere.datastore.disk.capacity.usage.bytes | The amount of storage capacity currently being consumed by datastore. | long |  | gauge |
| vsphere.datastore.disk.provisioned.bytes | Amount of storage set aside for use by a datastore. | long |  | gauge |
| vsphere.datastore.fstype | Filesystem type. | keyword |  |  |
| vsphere.datastore.host.count | Number of hosts associated with the datastore. | long |  | gauge |
| vsphere.datastore.host.names | List of all the host names associated with the datastore. | keyword |  |  |
| vsphere.datastore.iops | Storage I/O Control aggregated Input/Output Operations Per Second. | long |  | gauge |
| vsphere.datastore.name | Datastore name. | keyword |  |  |
| vsphere.datastore.read.bytes | Rate of reading data from the datastore. | long | byte | gauge |
| vsphere.datastore.read.latency.total.ms | Average amount of time for a read operation from the datastore in milliseconds. | long | ms | gauge |
| vsphere.datastore.status | Status of the datastore. | keyword |  |  |
| vsphere.datastore.triggerd_alarms.\* | List of all the triggerd alarms. | object |  |  |
| vsphere.datastore.vm.count | Number of VMs associated with the datastore. | long |  | gauge |
| vsphere.datastore.vm.names | List of all the VM names associated with the datastore. | keyword |  |  |
| vsphere.datastore.write.bytes | Rate of writing data to the datastore. | long | byte | gauge |
| vsphere.datastore.write.latency.total.ms | Average amount of time for a write operation from the datastore in milliseconds. | long | ms | gauge |


### Host

This is the `host` data stream. This data stream collects host metrics from VMware vSphere, including performance statistics such as CPU usage, memory usage, disk I/O, and network activity.

An example event for `host` looks as following:

```json
{
    "@timestamp": "2024-09-02T06:04:26.077Z",
    "agent": {
        "ephemeral_id": "1acd79f0-0361-47dd-8d47-32064268713f",
        "id": "958125fc-776b-4be3-b0ce-2762148f5f6d",
        "name": "docker-fleet-agent",
        "type": "metricbeat",
        "version": "8.13.0"
    },
    "data_stream": {
        "dataset": "vsphere.host",
        "namespace": "50835",
        "type": "metrics"
    },
    "ecs": {
        "version": "8.11.0"
    },
    "elastic_agent": {
        "id": "958125fc-776b-4be3-b0ce-2762148f5f6d",
        "snapshot": false,
        "version": "8.13.0"
    },
    "event": {
        "agent_id_status": "verified",
        "dataset": "vsphere.host",
        "duration": 32951837,
        "ingested": "2024-09-02T06:04:38Z",
        "module": "vsphere"
    },
    "host": {
        "architecture": "x86_64",
        "containerized": true,
        "hostname": "docker-fleet-agent",
        "id": "8259e024976a406e8a54cdbffeb84fec",
        "ip": [
            "192.168.253.6"
        ],
        "mac": [
            "02-42-C0-A8-FD-06"
        ],
        "name": "docker-fleet-agent",
        "os": {
            "codename": "focal",
            "family": "debian",
            "kernel": "3.10.0-1160.118.1.el7.x86_64",
            "name": "Ubuntu",
            "platform": "ubuntu",
            "type": "linux",
            "version": "20.04.6 LTS (Focal Fossa)"
        }
    },
    "metricset": {
        "name": "host",
        "period": 10000
    },
    "service": {
        "address": "https://svc-vsphere-metrics:8989/sdk",
        "type": "vsphere"
    },
    "vsphere": {
        "host": {
            "cpu": {
                "free": {
                    "mhz": 4521
                },
                "total": {
                    "mhz": 4588
                },
                "used": {
                    "mhz": 67,
                    "pct": 0.015
                }
            },
            "memory": {
                "free": {
                    "bytes": 2822230016
                },
                "total": {
                    "bytes": 4294430720
                },
                "used": {
                    "bytes": 1472200704,
                    "pct": 0.343
                }
            },
            "name": "DC0_H0",
            "network_names": "VM Network"
        }
    }
}
```

**ECS Field Reference**

Please refer to the following [document](https://www.elastic.co/guide/en/ecs/current/ecs-field-reference.html) for detailed information on ECS fields.

**Exported fields**

| Field | Description | Type | Unit | Metric Type |
|---|---|---|---|---|
| @timestamp | Event timestamp. | date |  |  |
| agent.id |  | keyword |  |  |
| cloud.account.id | The cloud account or organization id used to identify different entities in a multi-tenant environment. Examples: AWS account id, Google Cloud ORG Id, or other unique identifier. | keyword |  |  |
| cloud.availability_zone | Availability zone in which this host, resource, or service is located. | keyword |  |  |
| cloud.instance.id | Instance ID of the host machine. | keyword |  |  |
| cloud.provider | Name of the cloud provider. Example values are aws, azure, gcp, or digitalocean. | keyword |  |  |
| cloud.region | Region in which this host, resource, or service is located. | keyword |  |  |
| container.id | Unique container id. | keyword |  |  |
| data_stream.dataset | Data stream dataset. | constant_keyword |  |  |
| data_stream.namespace | Data stream namespace. | constant_keyword |  |  |
| data_stream.type | Data stream type. | constant_keyword |  |  |
| event.dataset | Event dataset | constant_keyword |  |  |
| event.module | Event module | constant_keyword |  |  |
| host.name | Name of the host.  It can contain what `hostname` returns on Unix systems, the fully qualified domain name, or a name specified by the user. The sender decides which value to use. | keyword |  |  |
| service.address | Address where data about this service was collected from. This should be a URI, network address (ipv4:port or [ipv6]:port) or a resource path (sockets). | keyword |  |  |
| vsphere.host.cpu.free.mhz | Free CPU in MHz. | long |  | gauge |
| vsphere.host.cpu.total.mhz | Total CPU in MHz. | long |  | counter |
| vsphere.host.cpu.used.mhz | Used CPU in MHz. | long |  | gauge |
| vsphere.host.cpu.used.pct | CPU Utilization % of the host | scaled_float | percent | gauge |
| vsphere.host.datastore.count | Number of datastores on the host. | long |  | gauge |
| vsphere.host.datastore.names | List of all the datastore names. | keyword |  |  |
| vsphere.host.disk.capacity.usage.bytes | The amount of storage capacity currently being consumed by or on the entity. | long | byte | gauge |
| vsphere.host.disk.devicelatency.average.ms | Average amount of time it takes to complete an SCSI command from physical device in milliseconds. | long | ms | gauge |
| vsphere.host.disk.latency.total.ms | Highest latency value across all disks used by the host in milliseconds. | long | ms | gauge |
| vsphere.host.disk.read.bytes | Average number of bytes read from the disk each second. | long | byte | gauge |
| vsphere.host.disk.total.bytes | Sum of disk read and write rates each second in bytes. | long | byte | gauge |
| vsphere.host.disk.write.bytes | Average number of bytes written to the disk each second. | long | byte | gauge |
| vsphere.host.memory.free.bytes | Free Memory in bytes. | long | byte | gauge |
| vsphere.host.memory.total.bytes | Total Memory in bytes. | long | byte | gauge |
| vsphere.host.memory.used.bytes | Used Memory in bytes. | long | byte | gauge |
| vsphere.host.memory.used.pct | Memory utilization % of the host | scaled_float | percent | gauge |
| vsphere.host.name | Host name. | keyword |  |  |
| vsphere.host.network.bandwidth.received.bytes | Average rate at which data was received during the interval. This represents the bandwidth of the network. | long | byte | gauge |
| vsphere.host.network.bandwidth.total.bytes | Sum of network transmitted and received rates in bytes during the interval. | long | byte | gauge |
| vsphere.host.network.bandwidth.transmitted.bytes | Average rate at which data was transmitted during the interval. This represents the bandwidth of the network. | long | byte | gauge |
| vsphere.host.network.count | Number of networks on the host. | long |  | gauge |
| vsphere.host.network.names | List of all the network names. | keyword |  |  |
| vsphere.host.network.packets.dropped.received.count | Number of received packets dropped. | long |  | gauge |
| vsphere.host.network.packets.dropped.total.count | Total number of packets dropped. | long |  | gauge |
| vsphere.host.network.packets.dropped.transmitted.count | Number of transmitted packets dropped. | long |  | gauge |
| vsphere.host.network.packets.errors.received.count | Number of packets with errors received. | long |  | gauge |
| vsphere.host.network.packets.errors.total.count | Total number of packets with errors. | long |  | gauge |
| vsphere.host.network.packets.errors.transmitted.count | Number of packets with errors transmitted. | long |  | gauge |
| vsphere.host.network.packets.multicast.received.count | Number of multicast packets received. | long |  | gauge |
| vsphere.host.network.packets.multicast.total.count | Total number of multicast packets. | long |  | gauge |
| vsphere.host.network.packets.multicast.transmitted.count | Number of multicast packets transmitted. | long |  | gauge |
| vsphere.host.network.packets.received.count | Number of packets received. | long |  | gauge |
| vsphere.host.network.packets.transmitted.count | Number of packets transmitted. | long |  | gauge |
| vsphere.host.network_names | Network names. | keyword |  |  |
| vsphere.host.status | The overall health status of a host in the vSphere environment. | keyword |  |  |
| vsphere.host.triggered_alarms.description | Description of the alarm. | keyword |  |  |
| vsphere.host.triggered_alarms.entity_name | Name of the entity associated with the alarm. | keyword |  |  |
| vsphere.host.triggered_alarms.id | Unique identifier for the alarm. | keyword |  |  |
| vsphere.host.triggered_alarms.name | Name of the alarm. | keyword |  |  |
| vsphere.host.triggered_alarms.status | Status of the alarm. | keyword |  |  |
| vsphere.host.triggered_alarms.triggered_time | Time when the alarm was triggered. | date |  |  |
| vsphere.host.uptime | The total uptime of a host in seconds within the vSphere environment. | long |  | gauge |
| vsphere.host.vm.count | Number of virtual machines on the host. | long |  | gauge |
| vsphere.host.vm.names | List of all the VM names. | keyword |  |  |


### Virtual Machine

This is the `virtualmachine` data stream. This data stream collects virtual machine metrics from VMware vSphere, including performance statistics such as status, uptime, CPU usage, memory usage, and network activity.

An example event for `virtualmachine` looks as following:

```json
{
    "@timestamp": "2023-06-29T08:06:40.827Z",
    "agent": {
        "ephemeral_id": "527dd76f-fe04-4478-b02c-110b5f47ccf4",
        "id": "5096d7cc-1e4b-4959-abea-7355be2913a7",
        "name": "docker-fleet-agent",
        "type": "metricbeat",
        "version": "8.8.1"
    },
    "data_stream": {
        "dataset": "vsphere.virtualmachine",
        "namespace": "ep",
        "type": "metrics"
    },
    "ecs": {
        "version": "8.11.0"
    },
    "elastic_agent": {
        "id": "5096d7cc-1e4b-4959-abea-7355be2913a7",
        "snapshot": false,
        "version": "8.8.1"
    },
    "event": {
        "agent_id_status": "verified",
        "dataset": "vsphere.virtualmachine",
        "duration": 14355583,
        "ingested": "2023-06-29T08:06:41Z",
        "module": "vsphere"
    },
    "host": {
        "architecture": "aarch64",
        "containerized": false,
        "hostname": "docker-fleet-agent",
        "id": "d08b346fbb8f49f5a2bb1a477f8ceb54",
        "ip": [
            "172.23.0.7"
        ],
        "mac": [
            "02-42-AC-17-00-07"
        ],
        "name": "docker-fleet-agent",
        "os": {
            "codename": "focal",
            "family": "debian",
            "kernel": "5.10.104-linuxkit",
            "name": "Ubuntu",
            "platform": "ubuntu",
            "type": "linux",
            "version": "20.04.6 LTS (Focal Fossa)"
        }
    },
    "metricset": {
        "name": "virtualmachine",
        "period": 10000
    },
    "service": {
        "address": "https://elastic-package-service_vsphere-metrics_1:8989/sdk",
        "type": "vsphere"
    },
    "vsphere": {
        "virtualmachine": {
            "cpu": {
                "used": {
                    "mhz": 0
                }
            },
            "host": {
                "hostname": "DC0_H0",
                "id": "host-21"
            },
            "memory": {
                "free": {
                    "guest": {
                        "bytes": 33554432
                    }
                },
                "total": {
                    "guest": {
                        "bytes": 33554432
                    }
                },
                "used": {
                    "guest": {
                        "bytes": 0
                    },
                    "host": {
                        "bytes": 0
                    }
                }
            },
            "name": "DC0_H0_VM0",
            "os": "otherGuest"
        }
    }
}
```

**ECS Field Reference**

Please refer to the following [document](https://www.elastic.co/guide/en/ecs/current/ecs-field-reference.html) for detailed information on ECS fields.

**Exported fields**

| Field | Description | Type | Unit | Metric Type |
|---|---|---|---|---|
| @timestamp | Event timestamp. | date |  |  |
| agent.id |  | keyword |  |  |
| cloud.account.id | The cloud account or organization id used to identify different entities in a multi-tenant environment. Examples: AWS account id, Google Cloud ORG Id, or other unique identifier. | keyword |  |  |
| cloud.availability_zone | Availability zone in which this host, resource, or service is located. | keyword |  |  |
| cloud.instance.id | Instance ID of the host machine. | keyword |  |  |
| cloud.provider | Name of the cloud provider. Example values are aws, azure, gcp, or digitalocean. | keyword |  |  |
| cloud.region | Region in which this host, resource, or service is located. | keyword |  |  |
| container.id | Unique container id. | keyword |  |  |
| data_stream.dataset | Data stream dataset. | constant_keyword |  |  |
| data_stream.namespace | Data stream namespace. | constant_keyword |  |  |
| data_stream.type | Data stream type. | constant_keyword |  |  |
| event.dataset | Event dataset | constant_keyword |  |  |
| event.module | Event module | constant_keyword |  |  |
| host.containerized | If the host is a container. | boolean |  |  |
| host.name | Name of the host.  It can contain what `hostname` returns on Unix systems, the fully qualified domain name, or a name specified by the user. The sender decides which value to use. | keyword |  |  |
| host.os.build | OS build information. | keyword |  |  |
| host.os.codename | OS codename, if any. | keyword |  |  |
| service.address | Address where data about this service was collected from. This should be a URI, network address (ipv4:port or [ipv6]:port) or a resource path (sockets). | keyword |  |  |
| vsphere.virtualmachine.cpu.free.mhz | Available CPU in Mhz. | long |  | gauge |
| vsphere.virtualmachine.cpu.total.mhz | Total Reserved CPU in Mhz. | long |  | counter |
| vsphere.virtualmachine.cpu.used.mhz | Used CPU in Mhz. | long |  | gauge |
| vsphere.virtualmachine.custom_fields | Custom fields. | object |  |  |
| vsphere.virtualmachine.datastore.count | Number of datastores associated to this virtualmachine. | long |  | gauge |
| vsphere.virtualmachine.datastore.names | Names of the datastore associated to this virtualmachine. | keyword |  |  |
| vsphere.virtualmachine.host.hostname | Hostname of the host. | keyword |  |  |
| vsphere.virtualmachine.host.id | Host id. | keyword |  |  |
| vsphere.virtualmachine.memory.free.guest.bytes | Free Memory of Guest in bytes. | long | byte | gauge |
| vsphere.virtualmachine.memory.total.guest.bytes | Total Memory of Guest in bytes. | long | byte | gauge |
| vsphere.virtualmachine.memory.used.guest.bytes | Used Memory of Guest in bytes. | long | byte | gauge |
| vsphere.virtualmachine.memory.used.host.bytes | Used Memory of Host in bytes. | long | byte | gauge |
| vsphere.virtualmachine.name | Virtual Machine name. | keyword |  |  |
| vsphere.virtualmachine.network.count | Number of networks associated to this virtualmachine. | long |  | gauge |
| vsphere.virtualmachine.network.names | Names of the networks associated to this virtualmachine. | keyword |  |  |
| vsphere.virtualmachine.network_names | Network names. | keyword |  |  |
| vsphere.virtualmachine.os | Virtual Machine Operating System name. | keyword |  |  |
| vsphere.virtualmachine.snapshot.count | The number of snapshots of this virtualmachine. | long |  | gauge |
| vsphere.virtualmachine.snapshot.info.createtime | Snapshot creation time. | date |  |  |
| vsphere.virtualmachine.snapshot.info.description | Snapshot description. | keyword |  |  |
| vsphere.virtualmachine.snapshot.info.id | Snapshot ID. | long |  |  |
| vsphere.virtualmachine.snapshot.info.name | Snapshot name. | keyword |  |  |
| vsphere.virtualmachine.snapshot.info.state | Snapshot state (e.g., poweredOn). | keyword |  |  |
| vsphere.virtualmachine.status | Overall health and status of a virtual machine. | keyword |  |  |
| vsphere.virtualmachine.triggerd_alarms.\* | List of all the triggerd alarms. | object |  |  |
| vsphere.virtualmachine.uptime | The uptime of the VM in seconds. | long |  | counter |


### Datastore Cluster

Datastore clusters in vSphere group multiple datastores for optimized management and automated load balancing, ensuring efficient storage utilization and simplified administration.

**ECS Field Reference**

Please refer to the following [document](https://www.elastic.co/guide/en/ecs/current/ecs-field-reference.html) for detailed information on ECS fields.

**Exported fields**

| Field | Description | Type | Unit | Metric Type |
|---|---|---|---|---|
| @timestamp | Event timestamp. | date |  |  |
| agent.id |  | keyword |  |  |
| cloud.account.id | The cloud account or organization id used to identify different entities in a multi-tenant environment. Examples: AWS account id, Google Cloud ORG Id, or other unique identifier. | keyword |  |  |
| cloud.availability_zone | Availability zone in which this host, resource, or service is located. | keyword |  |  |
| cloud.instance.id | Instance ID of the host machine. | keyword |  |  |
| cloud.provider | Name of the cloud provider. Example values are aws, azure, gcp, or digitalocean. | keyword |  |  |
| cloud.region | Region in which this host, resource, or service is located. | keyword |  |  |
| container.id | Unique container id. | keyword |  |  |
| data_stream.dataset | Data stream dataset. | constant_keyword |  |  |
| data_stream.namespace | Data stream namespace. | constant_keyword |  |  |
| data_stream.type | Data stream type. | constant_keyword |  |  |
| event.dataset | Event dataset | constant_keyword |  |  |
| event.module | Event module | constant_keyword |  |  |
| host.name | Name of the host.  It can contain what `hostname` returns on Unix systems, the fully qualified domain name, or a name specified by the user. The sender decides which value to use. | keyword |  |  |
| service.address | Address where data about this service was collected from. This should be a URI, network address (ipv4:port or [ipv6]:port) or a resource path (sockets). | keyword |  |  |
| vsphere.datastorecluster.capacity.bytes | Total capacity of this storage pod, in bytes. | long | byte | gauge |
| vsphere.datastorecluster.datastore.count | Number of datastores in the Datastore Cluster. | long |  | gauge |
| vsphere.datastorecluster.datastore.names | List of all the Datastore names associated with the Datastore Cluster. | keyword |  |  |
| vsphere.datastorecluster.free_space.bytes | Total free space on this storage pod, in bytes. | long | byte | gauge |
| vsphere.datastorecluster.name | The Datastore Cluster name. | keyword |  |  |
| vsphere.datastorecluster.triggered_alarms.description | Description of the alarm. | keyword |  |  |
| vsphere.datastorecluster.triggered_alarms.entity_name | Name of the entity associated with the alarm. | keyword |  |  |
| vsphere.datastorecluster.triggered_alarms.id | Unique identifier for the alarm. | keyword |  |  |
| vsphere.datastorecluster.triggered_alarms.name | Name of the alarm. | keyword |  |  |
| vsphere.datastorecluster.triggered_alarms.status | Status of the alarm. | keyword |  |  |
| vsphere.datastorecluster.triggered_alarms.triggered_time | Time when the alarm was triggered. | date |  |  |


## Logs

To collect logs, a syslog daemon is used. First, you must configure the listening host/IP address (default: localhost) and host port (default: 9525) in the integration. Then, configure vSphere to send logs to a remote syslog host and provide the configured hostname/IP and port of the Elastic Agent host.

### vSphere Logs

**ECS Field Reference**

Please refer to the following [document](https://www.elastic.co/guide/en/ecs/current/ecs-field-reference.html) for detailed information on ECS fields.

**Exported fields**

| Field | Description | Type |
|---|---|---|
| @timestamp | Event timestamp. | date |
| data_stream.dataset | Data stream dataset. | constant_keyword |
| data_stream.namespace | Data stream namespace. | constant_keyword |
| data_stream.type | Data stream type. | constant_keyword |
| event.dataset | Event dataset | constant_keyword |
| event.module | Event module | constant_keyword |
| host.containerized | If the host is a container. | boolean |
| host.os.build | OS build information. | keyword |
| host.os.codename | OS codename, if any. | keyword |
| hostname | Hostname from syslog header. | keyword |
| input.type | Type of Filebeat input. | keyword |
| log.source.address | Source address of the syslog message. | keyword |
| process.program | Process from syslog header. | keyword |
| vsphere.log.api.invocations |  | long |
| vsphere.log.datacenter |  | keyword |
| vsphere.log.file.path |  | keyword |

