{
    "attributes": {
        "controlGroupInput": {
            "chainingSystem": "HIERARCHICAL",
            "controlStyle": "oneLine",
            "ignoreParentSettingsJSON": {
                "ignoreFilters": false,
                "ignoreQuery": false,
                "ignoreTimerange": false,
                "ignoreValidations": false
            },
            "panelsJSON": {
                "dbc01c0f-4718-487a-8b3f-07c13287b655": {
                    "explicitInput": {
                        "dataViewId": "metrics-*",
                        "fieldName": "cloud.account.id",
                        "id": "dbc01c0f-4718-487a-8b3f-07c13287b655",
                        "searchTechnique": "wildcard",
                        "selectedOptions": [],
                        "singleSelect": true,
                        "sort": {
                            "by": "_count",
                            "direction": "desc"
                        }
                    },
                    "grow": false,
                    "order": 0,
                    "type": "optionsListControl",
                    "width": "medium"
                }
            },
            "showApplySelections": false
        },
        "description": "This dashboard provides insights into the credits and billing data for ESS.",
        "kibanaSavedObjectMeta": {
            "searchSourceJSON": {
                "filter": [],
                "query": {
                    "language": "kuery",
                    "query": ""
                }
            }
        },
        "optionsJSON": {
            "hidePanelTitles": false,
            "syncColors": false,
            "syncCursor": true,
            "syncTooltips": false,
            "useMargins": true
        },
        "panelsJSON": [
            {
                "embeddableConfig": {
                    "attributes": {
                        "layout": "vertical",
                        "links": [
                            {
                                "destinationRefName": "link_41ef1269-cf4b-479b-b6b1-e259df2f610e_dashboard",
                                "id": "41ef1269-cf4b-479b-b6b1-e259df2f610e",
                                "label": "Billing",
                                "order": 0,
                                "type": "dashboardLink"
                            },
                            {
                                "destinationRefName": "link_94e5341a-801b-40fd-91d5-69d0da0b2a83_dashboard",
                                "id": "94e5341a-801b-40fd-91d5-69d0da0b2a83",
                                "label": "Credits",
                                "order": 1,
                                "type": "dashboardLink"
                            },
                            {
                                "destination": "https://cloud.elastic.co",
                                "id": "c10197c7-0ff6-49ce-81a7-7e140c18d430",
                                "label": "☁️ Elastic Cloud",
                                "order": 2,
                                "type": "externalLink"
                            }
                        ]
                    },
                    "enhancements": {}
                },
                "gridData": {
                    "h": 7,
                    "i": "76f552c2-c774-4cae-b875-c44440b070d2",
                    "w": 5,
                    "x": 0,
                    "y": 0
                },
                "panelIndex": "76f552c2-c774-4cae-b875-c44440b070d2",
                "type": "links"
            },
            {
                "embeddableConfig": {
                    "attributes": {
                        "references": [
                            {
                                "id": "metrics-*",
                                "name": "indexpattern-datasource-layer-8c4e8172-eb9b-4d3b-822d-2cf041d9a9af",
                                "type": "index-pattern"
                            }
                        ],
                        "state": {
                            "adHocDataViews": {},
                            "datasourceStates": {
                                "formBased": {
                                    "currentIndexPatternId": "metrics-*",
                                    "layers": {
                                        "8c4e8172-eb9b-4d3b-822d-2cf041d9a9af": {
                                            "columnOrder": [
                                                "0ea16e71-0cd4-4578-a0cc-8b5325fcd01b",
                                                "0ea16e71-0cd4-4578-a0cc-8b5325fcd01bX0"
                                            ],
                                            "columns": {
                                                "0ea16e71-0cd4-4578-a0cc-8b5325fcd01b": {
                                                    "customLabel": true,
                                                    "dataType": "number",
                                                    "isBucketed": false,
                                                    "label": "Total cost for period (ECUs)",
                                                    "operationType": "formula",
                                                    "params": {
                                                        "format": {
                                                            "id": "number",
                                                            "params": {
                                                                "compact": false,
                                                                "decimals": 0,
                                                                "suffix": ""
                                                            }
                                                        },
                                                        "formula": "sum(ess.billing.total_ecu)",
                                                        "isFormulaBroken": false
                                                    },
                                                    "references": [
                                                        "0ea16e71-0cd4-4578-a0cc-8b5325fcd01bX0"
                                                    ],
                                                    "scale": "ratio"
                                                },
                                                "0ea16e71-0cd4-4578-a0cc-8b5325fcd01bX0": {
                                                    "customLabel": true,
                                                    "dataType": "number",
                                                    "isBucketed": false,
                                                    "label": "Part of Total cost for period",
                                                    "operationType": "sum",
                                                    "params": {
                                                        "emptyAsNull": false
                                                    },
                                                    "scale": "ratio",
                                                    "sourceField": "ess.billing.total_ecu"
                                                }
                                            },
                                            "ignoreGlobalFilters": false,
                                            "incompleteColumns": {},
                                            "indexPatternId": "metrics-*",
                                            "sampling": 1
                                        }
                                    }
                                },
                                "indexpattern": {
                                    "layers": {}
                                },
                                "textBased": {
                                    "layers": {}
                                }
                            },
                            "filters": [],
                            "internalReferences": [],
                            "query": {
                                "language": "kuery",
                                "query": "data_stream.dataset :\"ess_billing.billing\" "
                            },
                            "visualization": {
                                "layerId": "8c4e8172-eb9b-4d3b-822d-2cf041d9a9af",
                                "layerType": "data",
                                "metricAccessor": "0ea16e71-0cd4-4578-a0cc-8b5325fcd01b",
                                "showBar": false
                            }
                        },
                        "title": "",
                        "type": "lens",
                        "visualizationType": "lnsMetric"
                    },
                    "enhancements": {},
                    "hidePanelTitles": true
                },
                "gridData": {
                    "h": 7,
                    "i": "da3e016c-9d68-4089-a0d1-b1e643f1f317",
                    "w": 6,
                    "x": 5,
                    "y": 0
                },
                "panelIndex": "da3e016c-9d68-4089-a0d1-b1e643f1f317",
                "title": "",
                "type": "lens"
            },
            {
                "embeddableConfig": {
                    "attributes": {
                        "description": "Run rate computed from the recent consumption",
                        "references": [
                            {
                                "id": "metrics-*",
                                "name": "indexpattern-datasource-layer-8c4e8172-eb9b-4d3b-822d-2cf041d9a9af",
                                "type": "index-pattern"
                            }
                        ],
                        "state": {
                            "adHocDataViews": {},
                            "datasourceStates": {
                                "formBased": {
                                    "layers": {
                                        "8c4e8172-eb9b-4d3b-822d-2cf041d9a9af": {
                                            "columnOrder": [
                                                "0ea16e71-0cd4-4578-a0cc-8b5325fcd01b",
                                                "0ea16e71-0cd4-4578-a0cc-8b5325fcd01bX0",
                                                "0ea16e71-0cd4-4578-a0cc-8b5325fcd01bX1",
                                                "0ea16e71-0cd4-4578-a0cc-8b5325fcd01bX2",
                                                "0ea16e71-0cd4-4578-a0cc-8b5325fcd01bX3"
                                            ],
                                            "columns": {
                                                "0ea16e71-0cd4-4578-a0cc-8b5325fcd01b": {
                                                    "customLabel": true,
                                                    "dataType": "number",
                                                    "isBucketed": false,
                                                    "label": "Avg. run-rate (ECUs/day)",
                                                    "operationType": "formula",
                                                    "params": {
                                                        "format": {
                                                            "id": "number",
                                                            "params": {
                                                                "compact": false,
                                                                "decimals": 0,
                                                                "suffix": ""
                                                            }
                                                        },
                                                        "formula": "sum(\n    ess.billing.total_ecu,\n    kql='@timestamp \u003e now-7d/d'\n) / (\n        (\n        max(@timestamp,\n        kql='@timestamp \u003e now-7d/d')\n        -\n        min(@timestamp,\n        kql='@timestamp \u003e now-7d/d')\n        ) / (1000*3600*24) + 1\n)\n",
                                                        "isFormulaBroken": false
                                                    },
                                                    "references": [
                                                        "0ea16e71-0cd4-4578-a0cc-8b5325fcd01bX3"
                                                    ],
                                                    "scale": "ratio"
                                                },
                                                "0ea16e71-0cd4-4578-a0cc-8b5325fcd01bX0": {
                                                    "customLabel": true,
                                                    "dataType": "number",
                                                    "filter": {
                                                        "language": "kuery",
                                                        "query": "@timestamp \u003e now-7d/d"
                                                    },
                                                    "isBucketed": false,
                                                    "label": "Part of Avg. run-rate",
                                                    "operationType": "sum",
                                                    "params": {
                                                        "emptyAsNull": false
                                                    },
                                                    "scale": "ratio",
                                                    "sourceField": "ess.billing.total_ecu"
                                                },
                                                "0ea16e71-0cd4-4578-a0cc-8b5325fcd01bX1": {
                                                    "customLabel": true,
                                                    "dataType": "date",
                                                    "filter": {
                                                        "language": "kuery",
                                                        "query": "@timestamp \u003e now-7d/d"
                                                    },
                                                    "isBucketed": false,
                                                    "label": "Part of Avg. run-rate",
                                                    "operationType": "max",
                                                    "params": {
                                                        "emptyAsNull": false
                                                    },
                                                    "scale": "ratio",
                                                    "sourceField": "@timestamp"
                                                },
                                                "0ea16e71-0cd4-4578-a0cc-8b5325fcd01bX2": {
                                                    "customLabel": true,
                                                    "dataType": "date",
                                                    "filter": {
                                                        "language": "kuery",
                                                        "query": "@timestamp \u003e now-7d/d"
                                                    },
                                                    "isBucketed": false,
                                                    "label": "Part of Avg. run-rate",
                                                    "operationType": "min",
                                                    "params": {
                                                        "emptyAsNull": false
                                                    },
                                                    "scale": "ratio",
                                                    "sourceField": "@timestamp"
                                                },
                                                "0ea16e71-0cd4-4578-a0cc-8b5325fcd01bX3": {
                                                    "customLabel": true,
                                                    "dataType": "number",
                                                    "isBucketed": false,
                                                    "label": "Part of Avg. run-rate",
                                                    "operationType": "math",
                                                    "params": {
                                                        "tinymathAst": {
                                                            "args": [
                                                                "0ea16e71-0cd4-4578-a0cc-8b5325fcd01bX0",
                                                                {
                                                                    "args": [
                                                                        {
                                                                            "args": [
                                                                                {
                                                                                    "args": [
                                                                                        "0ea16e71-0cd4-4578-a0cc-8b5325fcd01bX1",
                                                                                        "0ea16e71-0cd4-4578-a0cc-8b5325fcd01bX2"
                                                                                    ],
                                                                                    "location": {
                                                                                        "max": 220,
                                                                                        "min": 88
                                                                                    },
                                                                                    "name": "subtract",
                                                                                    "text": "max(@timestamp,\n        kql='@timestamp \u003e now-7d/d')\n        -\n        min(@timestamp,\n        kql='@timestamp \u003e now-7d/d')\n        ",
                                                                                    "type": "function"
                                                                                },
                                                                                {
                                                                                    "args": [
                                                                                        {
                                                                                            "args": [
                                                                                                1000,
                                                                                                3600
                                                                                            ],
                                                                                            "name": "multiply",
                                                                                            "type": "function"
                                                                                        },
                                                                                        24
                                                                                    ],
                                                                                    "location": {
                                                                                        "max": 237,
                                                                                        "min": 225
                                                                                    },
                                                                                    "name": "multiply",
                                                                                    "text": "1000*3600*24",
                                                                                    "type": "function"
                                                                                }
                                                                            ],
                                                                            "location": {
                                                                                "max": 239,
                                                                                "min": 78
                                                                            },
                                                                            "name": "divide",
                                                                            "text": "(\n        max(@timestamp,\n        kql='@timestamp \u003e now-7d/d')\n        -\n        min(@timestamp,\n        kql='@timestamp \u003e now-7d/d')\n        ) / (1000*3600*24) ",
                                                                            "type": "function"
                                                                        },
                                                                        1
                                                                    ],
                                                                    "location": {
                                                                        "max": 243,
                                                                        "min": 78
                                                                    },
                                                                    "name": "add",
                                                                    "text": "(\n        max(@timestamp,\n        kql='@timestamp \u003e now-7d/d')\n        -\n        min(@timestamp,\n        kql='@timestamp \u003e now-7d/d')\n        ) / (1000*3600*24) + 1\n",
                                                                    "type": "function"
                                                                }
                                                            ],
                                                            "location": {
                                                                "max": 245,
                                                                "min": 0
                                                            },
                                                            "name": "divide",
                                                            "text": "sum(\n    ess.billing.total_ecu,\n    kql='@timestamp \u003e now-7d/d'\n) / (\n        (\n        max(@timestamp,\n        kql='@timestamp \u003e now-7d/d')\n        -\n        min(@timestamp,\n        kql='@timestamp \u003e now-7d/d')\n        ) / (1000*3600*24) + 1\n)\n",
                                                            "type": "function"
                                                        }
                                                    },
                                                    "references": [
                                                        "0ea16e71-0cd4-4578-a0cc-8b5325fcd01bX0",
                                                        "0ea16e71-0cd4-4578-a0cc-8b5325fcd01bX1",
                                                        "0ea16e71-0cd4-4578-a0cc-8b5325fcd01bX2"
                                                    ],
                                                    "scale": "ratio"
                                                }
                                            },
                                            "ignoreGlobalFilters": false,
                                            "incompleteColumns": {},
                                            "sampling": 1
                                        }
                                    }
                                },
                                "indexpattern": {
                                    "layers": {}
                                },
                                "textBased": {
                                    "layers": {}
                                }
                            },
                            "filters": [],
                            "internalReferences": [],
                            "query": {
                                "language": "kuery",
                                "query": "data_stream.dataset :\"ess_billing.billing\" "
                            },
                            "visualization": {
                                "icon": "temperature",
                                "layerId": "8c4e8172-eb9b-4d3b-822d-2cf041d9a9af",
                                "layerType": "data",
                                "metricAccessor": "0ea16e71-0cd4-4578-a0cc-8b5325fcd01b",
                                "showBar": false
                            }
                        },
                        "title": "",
                        "type": "lens",
                        "visualizationType": "lnsMetric"
                    },
                    "description": "Run rate computed from the recent consumption",
                    "enhancements": {},
                    "hidePanelTitles": true
                },
                "gridData": {
                    "h": 7,
                    "i": "a2fbfbeb-1229-4dae-9474-31804b2cc512",
                    "w": 6,
                    "x": 11,
                    "y": 0
                },
                "panelIndex": "a2fbfbeb-1229-4dae-9474-31804b2cc512",
                "title": "",
                "type": "lens"
            },
            {
                "embeddableConfig": {
                    "attributes": {
                        "references": [
                            {
                                "id": "metrics-*",
                                "name": "indexpattern-datasource-layer-1aabb792-21de-41ae-85fe-9a5f9f703ab2",
                                "type": "index-pattern"
                            },
                            {
                                "id": "metrics-*",
                                "name": "1f32bbe8-1ddb-4451-a2e5-2d1966b2eb40",
                                "type": "index-pattern"
                            },
                            {
                                "id": "metrics-*",
                                "name": "80b4065a-cd81-4033-b91c-72ef158f3934",
                                "type": "index-pattern"
                            }
                        ],
                        "state": {
                            "adHocDataViews": {},
                            "datasourceStates": {
                                "formBased": {
                                    "layers": {
                                        "1aabb792-21de-41ae-85fe-9a5f9f703ab2": {
                                            "columnOrder": [
                                                "ae2df32b-5c17-4ba0-8d22-769ae23ec5d8",
                                                "ae2df32b-5c17-4ba0-8d22-769ae23ec5d8X0",
                                                "cc8781b9-650d-41f8-ac20-faa4ba08aa44",
                                                "cc8781b9-650d-41f8-ac20-faa4ba08aa44X0",
                                                "a030c251-94c8-4632-9ff4-148cb9b947a0",
                                                "a030c251-94c8-4632-9ff4-148cb9b947a0X0"
                                            ],
                                            "columns": {
                                                "a030c251-94c8-4632-9ff4-148cb9b947a0": {
                                                    "customLabel": true,
                                                    "dataType": "number",
                                                    "isBucketed": false,
                                                    "label": "Purchased total",
                                                    "operationType": "formula",
                                                    "params": {
                                                        "format": {
                                                            "id": "number",
                                                            "params": {
                                                                "decimals": 0
                                                            }
                                                        },
                                                        "formula": "last_value(ess.billing.ecu_quantity, kql='\"ess.billing.ecu_balance\" \u003e 0 AND NOT ess.billing.type : \"credit\" AND ess.billing.active : true ')",
                                                        "isFormulaBroken": false
                                                    },
                                                    "references": [
                                                        "a030c251-94c8-4632-9ff4-148cb9b947a0X0"
                                                    ],
                                                    "scale": "ratio"
                                                },
                                                "a030c251-94c8-4632-9ff4-148cb9b947a0X0": {
                                                    "customLabel": true,
                                                    "dataType": "number",
                                                    "filter": {
                                                        "language": "kuery",
                                                        "query": "\"ess.billing.ecu_balance\" \u003e 0 AND NOT ess.billing.type : \"credit\" AND ess.billing.active : true "
                                                    },
                                                    "isBucketed": false,
                                                    "label": "Part of last_value(ess.billing.ecu_quantity, kql='\"ess.billing.ecu_balance\" \u003e 0 AND NOT ess.billing.type : \"credit\" AND ess.billing.active : true ')",
                                                    "operationType": "last_value",
                                                    "params": {
                                                        "sortField": "@timestamp"
                                                    },
                                                    "scale": "ratio",
                                                    "sourceField": "ess.billing.ecu_quantity"
                                                },
                                                "ae2df32b-5c17-4ba0-8d22-769ae23ec5d8": {
                                                    "customLabel": true,
                                                    "dataType": "number",
                                                    "isBucketed": false,
                                                    "label": "Balance (ECUs)",
                                                    "operationType": "formula",
                                                    "params": {
                                                        "format": {
                                                            "id": "number",
                                                            "params": {
                                                                "decimals": 0
                                                            }
                                                        },
                                                        "formula": "last_value(ess.billing.ecu_balance, kql='\"ess.billing.ecu_balance\" \u003e 0 AND NOT ess.billing.type : \"credit\" AND ess.billing.active : true ')",
                                                        "isFormulaBroken": false
                                                    },
                                                    "references": [
                                                        "ae2df32b-5c17-4ba0-8d22-769ae23ec5d8X0"
                                                    ],
                                                    "scale": "ratio"
                                                },
                                                "ae2df32b-5c17-4ba0-8d22-769ae23ec5d8X0": {
                                                    "customLabel": true,
                                                    "dataType": "number",
                                                    "filter": {
                                                        "language": "kuery",
                                                        "query": "\"ess.billing.ecu_balance\" \u003e 0 AND NOT ess.billing.type : \"credit\" AND ess.billing.active : true "
                                                    },
                                                    "isBucketed": false,
                                                    "label": "Part of Balance (ECUs)",
                                                    "operationType": "last_value",
                                                    "params": {
                                                        "sortField": "@timestamp"
                                                    },
                                                    "scale": "ratio",
                                                    "sourceField": "ess.billing.ecu_balance"
                                                },
                                                "cc8781b9-650d-41f8-ac20-faa4ba08aa44": {
                                                    "customLabel": true,
                                                    "dataType": "number",
                                                    "isBucketed": false,
                                                    "label": "Purchased total",
                                                    "operationType": "formula",
                                                    "params": {
                                                        "formula": "last_value(ess.billing.ecu_quantity, kql='\"ess.billing.ecu_balance\" \u003e 0 AND NOT ess.billing.type : \"credit\" AND ess.billing.active : true ')",
                                                        "isFormulaBroken": false
                                                    },
                                                    "references": [
                                                        "cc8781b9-650d-41f8-ac20-faa4ba08aa44X0"
                                                    ],
                                                    "scale": "ratio"
                                                },
                                                "cc8781b9-650d-41f8-ac20-faa4ba08aa44X0": {
                                                    "customLabel": true,
                                                    "dataType": "number",
                                                    "filter": {
                                                        "language": "kuery",
                                                        "query": "\"ess.billing.ecu_balance\" \u003e 0 AND NOT ess.billing.type : \"credit\" AND ess.billing.active : true "
                                                    },
                                                    "isBucketed": false,
                                                    "label": "Part of last_value(ess.billing.ecu_quantity, kql='\"ess.billing.ecu_balance\" \u003e 0 AND NOT ess.billing.type : \"credit\" AND ess.billing.active : true ')",
                                                    "operationType": "last_value",
                                                    "params": {
                                                        "sortField": "@timestamp"
                                                    },
                                                    "scale": "ratio",
                                                    "sourceField": "ess.billing.ecu_quantity"
                                                }
                                            },
                                            "ignoreGlobalFilters": false,
                                            "incompleteColumns": {},
                                            "sampling": 1
                                        }
                                    }
                                },
                                "indexpattern": {
                                    "layers": {}
                                },
                                "textBased": {
                                    "layers": {}
                                }
                            },
                            "filters": [
                                {
                                    "$state": {
                                        "store": "appState"
                                    },
                                    "meta": {
                                        "alias": null,
                                        "disabled": false,
                                        "field": "event.dataset",
                                        "index": "1f32bbe8-1ddb-4451-a2e5-2d1966b2eb40",
                                        "key": "event.dataset",
                                        "negate": false,
                                        "params": {
                                            "query": "ess_billing.credits"
                                        },
                                        "type": "phrase"
                                    },
                                    "query": {
                                        "match_phrase": {
                                            "event.dataset": "ess_billing.credits"
                                        }
                                    }
                                },
                                {
                                    "$state": {
                                        "store": "appState"
                                    },
                                    "meta": {
                                        "alias": null,
                                        "disabled": false,
                                        "field": "ess.billing.active",
                                        "index": "80b4065a-cd81-4033-b91c-72ef158f3934",
                                        "key": "ess.billing.active",
                                        "negate": false,
                                        "params": {
                                            "query": true
                                        },
                                        "type": "phrase"
                                    },
                                    "query": {
                                        "match_phrase": {
                                            "ess.billing.active": true
                                        }
                                    }
                                }
                            ],
                            "internalReferences": [],
                            "query": {
                                "language": "kuery",
                                "query": "@timestamp \u003e now-24h"
                            },
                            "visualization": {
                                "layerId": "1aabb792-21de-41ae-85fe-9a5f9f703ab2",
                                "layerType": "data",
                                "maxAccessor": "cc8781b9-650d-41f8-ac20-faa4ba08aa44",
                                "metricAccessor": "ae2df32b-5c17-4ba0-8d22-769ae23ec5d8",
                                "secondaryMetricAccessor": "a030c251-94c8-4632-9ff4-148cb9b947a0",
                                "showBar": true
                            }
                        },
                        "title": "",
                        "type": "lens",
                        "visualizationType": "lnsMetric"
                    },
                    "enhancements": {}
                },
                "gridData": {
                    "h": 7,
                    "i": "b577ecaf-2704-4c97-bf70-9866f57e76c7",
                    "w": 16,
                    "x": 17,
                    "y": 0
                },
                "panelIndex": "b577ecaf-2704-4c97-bf70-9866f57e76c7",
                "type": "lens"
            },
            {
                "embeddableConfig": {
                    "enhancements": {
                        "dynamicActions": {
                            "events": []
                        }
                    },
                    "savedVis": {
                        "data": {
                            "aggs": [],
                            "searchSource": {
                                "filter": [
                                    {
                                        "$state": {
                                            "store": "appState"
                                        },
                                        "meta": {
                                            "alias": null,
                                            "disabled": false,
                                            "indexRefName": "kibanaSavedObjectMeta.searchSourceJSON.filter[0].meta.index",
                                            "negate": false,
                                            "params": [
                                                {
                                                    "meta": {
                                                        "alias": null,
                                                        "disabled": false,
                                                        "field": "event.dataset",
                                                        "index": "logs-*",
                                                        "key": "event.dataset",
                                                        "negate": false,
                                                        "params": {
                                                            "query": "ess_billing.credits"
                                                        },
                                                        "type": "phrase"
                                                    },
                                                    "query": {
                                                        "match_phrase": {
                                                            "event.dataset": "ess_billing.credits"
                                                        }
                                                    }
                                                },
                                                {
                                                    "meta": {
                                                        "alias": null,
                                                        "disabled": false,
                                                        "field": "event.dataset",
                                                        "index": "logs-*",
                                                        "key": "event.dataset",
                                                        "negate": false,
                                                        "params": {
                                                            "query": "ess_billing.billing"
                                                        },
                                                        "type": "phrase"
                                                    },
                                                    "query": {
                                                        "match_phrase": {
                                                            "event.dataset": "ess_billing.billing"
                                                        }
                                                    }
                                                }
                                            ],
                                            "relation": "OR",
                                            "type": "combined"
                                        },
                                        "query": {}
                                    }
                                ],
                                "query": {
                                    "language": "kuery",
                                    "query": ""
                                }
                            }
                        },
                        "description": "",
                        "id": "",
                        "params": {
                            "spec": "{\n  \"$schema\": \"https://vega.github.io/schema/vega/v5.json\",\n  \"data\": [\n    {\n      \"name\": \"credits\",\n      \"url\": {\n        \"index\": \"metrics-ess_billing.credits-*\",\n        \"body\": {\n          \"size\": 0,\n          \"query\": {\n            \"bool\": {\n              \"must\": [\n                \"%dashboard_context-must_clause%\"\n              ],\n              \"must_not\": [\n                \"%dashboard_context-must_not_clause%\"],\n              \"filter\": [\n                \"%dashboard_context-filter_clause%\",\n                {\n                  \"range\": {\n                    \"@timestamp\": {\n                      \"gte\": \"now-24h\"\n                    }\n                  }\n                },\n                {\n                  \"term\": {\n                    \"ess.billing.active\": true\n                  }\n                },\n                {\n                  \"range\": {\n                    \"ess.billing.ecu_balance\": {\n                      \"gt\": 0\n                    }\n                  }\n                }\n              ]\n            }\n          },\n          \"aggs\": {\n            \"ecu_balance\": {\n              \"sum\": {\n                \"field\": \"ess.billing.ecu_balance\"\n              }\n            },\n            \"ecu_quantity\": {\n              \"sum\": {\n                \"field\": \"ess.billing.ecu_quantity\"\n              }\n            },\n            \"start\": {\n              \"min\": {\n                \"field\": \"ess.billing.start\"\n              }\n            },\n            \"end\": {\n              \"max\": {\n                \"field\": \"ess.billing.end\"\n              }\n            },\n            \"@timestamp\": {\n              \"max\": {\n                \"field\": \"@timestamp\"\n              }\n            }\n          }\n        }\n      }\n      \"format\": {\"property\": \"aggregations\"},\n      \"transform\": [\n        {\n          \"type\": \"project\",\n          \"fields\": [\n            \"ecu_balance.value\",\n            \"ecu_quantity.value\",\n            \"start.value_as_string\",\n            \"end.value_as_string\",\n            \"@timestamp.value_as_string\"\n          ],\n          \"as\": [\n            \"ecu_balance\",\n            \"ecu_quantity\",\n            \"start\",\n            \"end\",\n            \"timestamp\"\n          ]\n        },\n        {\n          \"type\": \"formula\",\n          \"expr\": \"utcParse(datum.start, '%Y-%m-%dT%H:%M:%S.%LZ')\",\n          \"as\": \"start\"\n        },\n        {\n          \"type\": \"formula\",\n          \"expr\": \"utcParse(datum.end, '%Y-%m-%dT%H:%M:%S.%LZ')\",\n          \"as\": \"end\"\n        },\n        {\n          \"type\": \"formula\",\n          \"expr\": \"utcParse(datum.timestamp, '%Y-%m-%dT%H:%M:%S.%LZ')\",\n          \"as\": \"timestamp\"\n        }\n      ]\n    },\n    {\n      \"name\": \"billing_data\",\n      \"url\": {\n        \"%context%\": true,\n        \"%timefield%\": \"@timestamp\",\n        \"index\": \"metrics-ess_billing.billing-*\",\n        \"body\": {\n          \"size\": 0,\n          \"aggs\": {\n            \"daily_breakdown\": {\n              \"date_histogram\": {\n                \"min_doc_count\": 1,\n                \"field\": \"@timestamp\",\n                \"calendar_interval\": \"day\",\n                \"order\": {\"_key\": \"desc\"},\n                \"extended_bounds\": {\n                  \"min\": {\"%timefilter%\": \"min\"},\n                  \"max\": {\"%timefilter%\": \"max\"}\n                }\n              },\n              \"aggs\": {\"credit_use\": {\"sum\": {\"field\": \"ess.billing.total_ecu\"}}}\n            }\n          }\n        }\n      },\n      \"format\": {\"property\": \"aggregations.daily_breakdown.buckets\"},\n      \"transform\": [\n        {\n          \"type\": \"project\",\n          \"fields\": [\n            \"key_as_string\",\n            \"credit_use.value\"\n          ],\n          \"as\": [\n            \"timestamp\",\n            \"credit_use\"\n          ]\n        },\n        {\n          \"type\": \"formula\",\n          \"expr\": \"utcParse(datum.timestamp, '%Y-%m-%dT%H:%M:%S.%LZ')\",\n          \"as\": \"timestamp\"\n        },\n        {\n          \"type\": \"formula\",\n          \"expr\": \"data('credits')[0]\",\n          \"as\": \"credits\"\n        },\n        {\n          \"type\": \"project\",\n          \"fields\": [\n            \"credits.timestamp\",\n            \"credits.start\",\n            \"credits.end\",\n            \"credits.ecu_balance\",\n            \"credits.ecu_quantity\",\n            \"timestamp\",\n            \"credit_use\"\n          ],\n          \"as\": [\n            \"credit_measure_timestamp\",\n            \"credit_start\",\n            \"credit_end\",\n            \"credit_balance\",\n            \"credit_quantity\",\n            \"timestamp\",\n            \"credit_use\"\n          ]\n        }\n      ]\n    },\n    {\n      \"name\": \"billing_pre_credits\",\n      \"source\": \"billing_data\",\n      \"transform\": [\n        {\n          \"type\": \"filter\",\n          \"expr\": \"datum.timestamp \u003c datum.credit_measure_timestamp\"\n        },\n        {\n          \"type\": \"window\",\n          \"sort\": {\"field\": \"timestamp\", \"order\": \"descending\"},\n          \"fields\":[\"credit_use\"],\n          \"ops\": [\"sum\"],\n          \"as\": [\"cumulative_credit_use\"]\n        },\n        {\n          \"type\": \"formula\",\n          \"expr\": \"datum.cumulative_credit_use + datum.credit_balance\",\n          \"as\": \"ecu_balance\"\n        }\n      ]\n    },\n    {\n      \"name\": \"billing_post_credits\",\n      \"source\": \"billing_data\",\n      \"transform\": [\n        {\n          \"type\": \"filter\",\n          \"expr\": \"datum.timestamp \u003e= datum.credit_measure_timestamp\"\n        },\n        {\n          \"type\": \"formula\",\n          \"expr\": \"datum.timestamp - datum.credit_measure_timestamp == 0 ? 0 : datum.credit_use\",\n          \"as\": \"credit_use\"\n        },\n        {\n          \"type\": \"window\",\n          \"sort\": {\"field\": \"timestamp\", \"order\": \"ascending\"},\n          \"fields\":[\"credit_use\"],\n          \"ops\": [\"sum\"],\n          \"as\": [\"cumulative_credit_use\"]\n        },\n        {\n          \"type\": \"formula\",\n          \"expr\": \"datum.credit_balance - datum.cumulative_credit_use\",\n          \"as\": \"ecu_balance\"\n        }\n      ]\n    },\n    {\n      \"name\": \"historical_billing\",\n      \"source\": [\"billing_pre_credits\", \"billing_post_credits\"],\n      \"transform\": [\n        {\n          \"type\": \"project\",\n          \"fields\": [\n            \"timestamp\",\n            \"ecu_balance\"\n          ],\n          \"as\":[\n            \"day\",\n            \"ecu_balance\"\n          ]\n        },\n        {\n          \"type\": \"formula\",\n          \"expr\": \"'Historical consumption'\",\n          \"as\": \"type\"\n        },\n        {\n          \"type\": \"formula\",\n          \"expr\": \"utcFormat(datum.day, '%Y-%m-%d')\",\n          \"as\": \"key\"\n        },\n        {\n          \"type\": \"collect\",\n          \"sort\": {\"field\": \"day\", \"order\": \"descending\"}\n        }\n      ]\n    },\n    {\n      \"name\": \"expected_projection\",\n      \"url\": {\n        \"index\": \"metrics-ess_billing.billing-*\",\n        \"body\": {\n          \"size\": 0,\n          \"query\": {\n            \"bool\": {\n              \"must\": [\n                \"%dashboard_context-must_clause%\"\n              ],\n              \"must_not\": [\n                \"%dashboard_context-must_not_clause%\"\n              ],\n              \"filter\": [\n                \"%dashboard_context-filter_clause%\",\n                {\n                  \"range\": {\n                    \"@timestamp\": {\n                      \"gte\": \"now-3d/d\",\n                      \"lt\": \"now-1d/d\"\n                    }\n                  }\n                }\n              ]\n            }\n          },\n          \"aggs\": {\n            \"per_day\": {\n              \"date_histogram\": {\n                \"field\": \"@timestamp\",\n                \"calendar_interval\": \"day\"\n              },\n              \"aggs\": {\n                \"cost_per_day\": {\n                  \"sum\": {\n                    \"field\": \"ess.billing.total_ecu\"\n                  }\n                }\n              }\n            },\n            \"avg_cost_per_day\": {\n              \"avg_bucket\": {\n                \"buckets_path\": \"per_day\u003ecost_per_day\"\n              }\n            }\n          }\n        }\n      },\n      \"format\": {\"property\": \"aggregations.avg_cost_per_day.value\"},\n      \"transform\": [\n        {\n          \"type\": \"formula\",\n          \"expr\": \"data('historical_billing')[0]\",\n          \"as\": \"last_state\"\n        },\n        {\n          \"type\": \"formula\",\n          \"expr\": \"data('credits')[0]\",\n          \"as\": \"credits\"\n        },\n        {\n          \"type\": \"project\",\n          \"fields\": [\n            \"last_state.day\",\n            \"last_state.ecu_balance\",\n            \"credits.end\",\n            \"data\"\n          ],\n          \"as\": [\n            \"last_timestamp\",\n            \"ecu_balance\",\n            \"end\",\n            \"quantity\"\n          ]\n        },\n        {\n          \"type\": \"formula\",\n          \"expr\": \"timeOffset('day', datum.last_timestamp)\",\n          \"as\": \"last_timestamp\"\n        },\n        {\n          \"type\": \"formula\",\n          \"expr\": \"utcSequence('day', datum.last_timestamp, datum.end)\",\n          \"as\": \"day\"\n        },\n        {\n          \"type\": \"flatten\",\n          \"fields\": [\"day\"]\n        },\n        {\n          \"type\": \"window\",\n          \"fields\":[\"quantity\"],\n          \"ops\": [\"sum\"],\n          \"as\": [\"cumulative_quantity\"]\n        },\n        {\n          \"type\": \"formula\",\n          \"expr\": \"datum.ecu_balance-datum.cumulative_quantity\",\n          \"as\": \"ecu_balance\"\n        },\n        {\n          \"type\": \"project\",\n          \"fields\": [\"day\", \"ecu_balance\"]\n        },\n        {\n          \"type\": \"filter\",\n          \"expr\": \"datum.ecu_balance \u003e 0\"\n        },\n        {\n          \"type\": \"formula\",\n          \"expr\": \"'Expected consumption'\",\n          \"as\": \"type\"\n        },\n        {\n          \"type\": \"formula\",\n          \"expr\": \"utcFormat(datum.day, '%Y-%m-%d')\",\n          \"as\": \"key\"\n        }\n      ]\n    },\n    {\n      \"name\": \"contractual_projection\",\n      \"values\": [{}],\n      \"transform\": [\n        {\n          \"type\": \"formula\",\n          \"expr\": \"data('historical_billing')[0]\",\n          \"as\": \"last_state\"\n        },\n        {\n          \"type\": \"formula\",\n          \"expr\": \"data('credits')[0]\",\n          \"as\": \"credits\"\n        },\n        {\n          \"type\": \"project\",\n          \"fields\": [\n            \"last_state.day\",\n            \"last_state.ecu_balance\",\n            \"credits.end\"\n          ],\n          \"as\": [\n            \"last_timestamp\",\n            \"ecu_balance\",\n            \"end\"\n          ]\n        },\n        {\n          \"type\": \"formula\",\n          \"expr\": \"datum.ecu_balance/((datum.end-datum.last_timestamp)/1000/3600/24)\",\n          \"as\": \"quantity\"\n        },\n        {\n          \"type\": \"formula\",\n          \"expr\": \"timeOffset('day', datum.last_timestamp)\",\n          \"as\": \"last_timestamp\"\n        },\n        {\n          \"type\": \"formula\",\n          \"expr\": \"utcSequence('day', datum.last_timestamp, datum.end)\",\n          \"as\": \"day\"\n        },\n        {\n          \"type\": \"flatten\",\n          \"fields\": [\"day\"]\n        },\n        {\n          \"type\": \"window\",\n          \"fields\":[\"quantity\"],\n          \"ops\": [\"sum\"],\n          \"as\": [\"cumulative_quantity\"]\n        },\n        {\n          \"type\": \"formula\",\n          \"expr\": \"datum.ecu_balance-datum.cumulative_quantity\",\n          \"as\": \"ecu_balance\"\n        },\n        {\n          \"type\": \"project\",\n          \"fields\": [\"day\", \"ecu_balance\"]\n        },\n        {\n          \"type\": \"formula\",\n          \"expr\": \"'Contractual target'\",\n          \"as\": \"type\"\n        },\n        {\n          \"type\": \"formula\",\n          \"expr\": \"utcFormat(datum.day, '%Y-%m-%d')\",\n          \"as\": \"key\"\n        }\n      ]\n    },\n    {\n      \"name\": \"aggregated_billing\",\n      \"source\": [\"historical_billing\", \"expected_projection\", \"contractual_projection\"],\n      \"transform\": [\n        {\n          \"type\": \"collect\",\n           \"sort\": {\"field\": \"day\", \"order\": \"descending\"}\n        }\n      ]\n    }\n  ],\n  \"scales\": [\n    {\n      \"name\": \"x\",\n      \"type\": \"time\",\n      \"range\": \"width\",\n      \"domain\": {\"data\": \"aggregated_billing\", \"field\": \"day\"}\n    },\n    {\n      \"name\": \"y\",\n      \"type\": \"linear\",\n      \"range\": \"height\",\n      \"nice\": true,\n      \"zero\": false,\n      \"domain\": {\"data\": \"aggregated_billing\", \"field\": \"ecu_balance\"}\n    },\n    {\n      \"name\": \"color\",\n      \"type\": \"ordinal\",\n      \"range\": \"category\",\n      \"domain\": {\"data\": \"aggregated_billing\", \"field\": \"type\"}\n    }\n  ],\n  \"axes\": [\n    {\"orient\": \"bottom\", \"scale\": \"x\"},\n    {\"orient\": \"left\", \"scale\": \"y\"}\n  ],\n  \"signals\": [\n    {\n      \"name\": \"day\",\n      \"update\": \"now()\",\n      \"on\": [\n        {\n          \"events\": \"pointermove\",\n          \"update\": \"invert('x', clamp(x(), 0, width))\"\n        }\n      ]\n    },\n    {\n      \"name\": \"historical_balance\",\n      \"update\": \"pluck(data('historical_billing'), 'ecu_balance')[indexof(pluck(data('historical_billing'), 'key'), utcFormat(now(), '%Y-%m-%d'))]\",\n      \"on\": [\n        {\n          \"events\": \"pointermove\",\n          \"update\": \"pluck(data('historical_billing'), 'ecu_balance')[indexof(pluck(data('historical_billing'), 'key'), utcFormat(invert('x', clamp(x(), 0, width)), '%Y-%m-%d'))]\"\n        }\n      ]\n    },\n    {\n      \"name\": \"contractual_balance\",\n      \"update\": \"pluck(data('contractual_projection'), 'ecu_balance')[indexof(pluck(data('contractual_projection'), 'key'), utcFormat(now(), '%Y-%m-%d'))]\",\n      \"on\": [\n        {\n          \"events\": \"pointermove\",\n          \"update\": \"pluck(data('contractual_projection'), 'ecu_balance')[indexof(pluck(data('contractual_projection'), 'key'), utcFormat(invert('x', clamp(x(), 0, width)), '%Y-%m-%d'))]\"\n        }\n      ]\n    },\n    {\n      \"name\": \"expected_balance\",\n      \"update\": \"pluck(data('expected_projection'), 'ecu_balance')[indexof(pluck(data('expected_projection'), 'key'), utcFormat(now(), '%Y-%m-%d'))]\",\n      \"on\": [\n        {\n          \"events\": \"pointermove\",\n          \"update\": \"pluck(data('expected_projection'), 'ecu_balance')[indexof(pluck(data('expected_projection'), 'key'), utcFormat(invert('x', clamp(x(), 0, width)), '%Y-%m-%d'))]\"\n        }\n      ]\n    }\n  ],\n  \"marks\": [\n    {\n      \"type\": \"group\",\n      \"from\": {\n        \"facet\": {\n          \"name\": \"series\",\n          \"data\": \"aggregated_billing\",\n          \"groupby\": \"type\"\n        }\n      },\n      \"marks\": [\n        {\n          \"type\": \"line\",\n          \"from\": {\"data\": \"series\"},\n          \"encode\": {\n            \"update\": {\n              \"x\": {\"scale\": \"x\", \"field\": \"day\"},\n              \"y\": {\"scale\": \"y\", \"field\": \"ecu_balance\"},\n              \"stroke\": {\"scale\": \"color\", \"field\": \"type\"},\n              \"strokeWidth\": {\"value\": 2}\n            }\n          }\n        }\n      ]\n    },\n    {\n      \"type\": \"rule\",\n      \"encode\": {\n        \"update\": {\n          \"x\": {\"scale\": \"x\", \"signal\": \"day\", \"offset\": 0.5},\n          \"y\": {\"scale\": \"y\", \"signal\": \"extent([historical_balance, contractual_balance, expected_balance])[1]\", \"offset\": 0.5},\n          \"y2\": {\"field\": {\"group\": \"height\"}},\n          \"stroke\": {\"value\": \"black\"}\n        }\n      }\n    },\n    {\n      \"type\": \"rule\",\n      \"encode\": {\n        \"update\": {\n          \"x\": {\"value\": 0},\n          \"x2\": {\"scale\": \"x\", \"signal\": \"day\", \"offset\": 0.5},\n          \"y\": {\"scale\": \"y\", \"signal\": \"historical_balance\", \"offset\": 0.5},\n          \"stroke\": {\"scale\": \"color\", \"signal\": \"'Historical consumption'\"},\n          \"opacity\": { \"signal\": \"historical_balance == null ? 0 : 1\"}\n        }\n      }\n    },\n    {\n      \"type\": \"rule\",\n      \"encode\": {\n        \"update\": {\n          \"x\": {\"value\": 0},\n          \"x2\": {\"scale\": \"x\", \"signal\": \"day\", \"offset\": 0.5},\n          \"y\": {\"scale\": \"y\", \"signal\": \"contractual_balance\", \"offset\": 0.5},\n          \"stroke\": {\"scale\": \"color\", \"signal\": \"'Contractual target'\"},\n          \"opacity\": { \"signal\": \"contractual_balance == null ? 0 : 1\"}\n        }\n      }\n    },\n    {\n      \"type\": \"rule\",\n      \"encode\": {\n        \"update\": {\n          \"x\": {\"value\": 0},\n          \"x2\": {\"scale\": \"x\", \"signal\": \"day\", \"offset\": 0.5},\n          \"y\": {\"scale\": \"y\", \"signal\": \"expected_balance\", \"offset\": 0.5},\n          \"stroke\": {\"scale\": \"color\", \"signal\": \"'Expected consumption'\"},\n          \"opacity\": { \"signal\": \"expected_balance == null ? 0 : 1\"}\n        }\n      }\n    },\n    {\n      \"type\": \"text\",\n      \"encode\": {\n        \"update\": {\n          \"x\": {\"scale\": \"x\", \"signal\": \"day\"},\n          \"y2\": {\"field\": {\"group\": \"height\"}, \"offset\": 30},\n          \"align\": {\"value\": \"center\"},\n          \"text\": {\"signal\": \"timeFormat(day, '%d %b %Y')\"},\n          \"fill\": {\"value\": \"black\"}\n        }\n      }\n    },\n    {\n      \"type\": \"text\",\n      \"encode\": {\n        \"update\": {\n          \"x\": {\"offset\": -30},\n          \"y\": {\"scale\": \"y\", \"signal\": \"historical_balance\", \"offset\": 0.5},\n          \"align\": {\"value\": \"center\"},\n          \"text\": {\"signal\": \"format(ceil(historical_balance), ',.0f')\"},\n          \"fill\": {\"scale\": \"color\", \"signal\": \"'Historical consumption'\"},\n          \"opacity\": { \"signal\": \"historical_balance == null ? 0 : 1\"}\n        }\n      }\n    },\n    {\n      \"type\": \"text\",\n      \"encode\": {\n        \"update\": {\n          \"x\": {\"offset\": -30},\n          \"y\": {\"scale\": \"y\", \"signal\": \"contractual_balance\", \"offset\": 0.5},\n          \"align\": {\"value\": \"center\"},\n          \"text\": {\"signal\": \"format(ceil(contractual_balance), ',.0f')\"},\n          \"fill\": {\"scale\": \"color\", \"signal\": \"'Contractual target'\"},\n          \"opacity\": { \"signal\": \"contractual_balance == null ? 0 : 1\"}\n        }\n      }\n    },\n    {\n      \"type\": \"text\",\n      \"encode\": {\n        \"update\": {\n          \"x\": {\"offset\": -30},\n          \"y\": {\"scale\": \"y\", \"signal\": \"expected_balance\", \"offset\": 0.5},\n          \"align\": {\"value\": \"center\"},\n          \"text\": {\"signal\": \"format(ceil(expected_balance), ',.0f')\"},\n          \"fill\": {\"scale\": \"color\", \"signal\": \"'Expected consumption'\"},\n          \"opacity\": { \"signal\": \"expected_balance == null ? 0 : 1\"}\n        }\n      }\n    }\n  ],\n  \"legends\": [\n    {\n      \"fill\": \"color\",\n      \"orient\": \"top-right\",\n      \"encode\": {\n        \"title\": {\"update\": {\"fontSize\": {\"value\": 14}}},\n        \"labels\": {\n          \"enter\": {\"fontSize\": {\"value\": 12}, \"fill\": {\"value\": \"black\"}}\n        },\n        \"symbols\": {\"update\": {\"stroke\": {\"value\": \"transparent\"}}}\n      }\n    }\n  ]\n}"
                        },
                        "title": "",
                        "type": "vega",
                        "uiState": {}
                    }
                },
                "gridData": {
                    "h": 16,
                    "i": "827e1ba3-a36c-4018-bba5-743d18255607",
                    "w": 15,
                    "x": 33,
                    "y": 0
                },
                "panelIndex": "827e1ba3-a36c-4018-bba5-743d18255607",
                "title": "Burndown graph",
                "type": "visualization"
            },
            {
                "embeddableConfig": {
                    "attributes": {
                        "references": [
                            {
                                "id": "metrics-*",
                                "name": "indexpattern-datasource-layer-c9af8b12-7fac-4ff6-9e4e-796c744c3f1d",
                                "type": "index-pattern"
                            }
                        ],
                        "state": {
                            "adHocDataViews": {},
                            "datasourceStates": {
                                "formBased": {
                                    "currentIndexPatternId": "metrics-*",
                                    "layers": {
                                        "c9af8b12-7fac-4ff6-9e4e-796c744c3f1d": {
                                            "columnOrder": [
                                                "964a9602-36b4-4143-a4a5-4ef2ae4eeb20",
                                                "e32c3485-ff5f-41ec-b576-aff6d08672ba",
                                                "f3a939b5-e9dc-4164-a59f-56e7a9aced2a"
                                            ],
                                            "columns": {
                                                "964a9602-36b4-4143-a4a5-4ef2ae4eeb20": {
                                                    "customLabel": true,
                                                    "dataType": "date",
                                                    "isBucketed": true,
                                                    "label": "Time",
                                                    "operationType": "date_histogram",
                                                    "params": {
                                                        "dropPartials": false,
                                                        "includeEmptyRows": true,
                                                        "interval": "1M"
                                                    },
                                                    "scale": "interval",
                                                    "sourceField": "@timestamp"
                                                },
                                                "e32c3485-ff5f-41ec-b576-aff6d08672ba": {
                                                    "dataType": "date",
                                                    "isBucketed": true,
                                                    "label": "@timestamp",
                                                    "operationType": "date_histogram",
                                                    "params": {
                                                        "dropPartials": false,
                                                        "includeEmptyRows": true,
                                                        "interval": "1M"
                                                    },
                                                    "scale": "interval",
                                                    "sourceField": "@timestamp"
                                                },
                                                "f3a939b5-e9dc-4164-a59f-56e7a9aced2a": {
                                                    "customLabel": true,
                                                    "dataType": "number",
                                                    "isBucketed": false,
                                                    "label": "Deployment ECU cost",
                                                    "operationType": "sum",
                                                    "params": {
                                                        "emptyAsNull": true,
                                                        "format": {
                                                            "id": "number",
                                                            "params": {
                                                                "compact": true,
                                                                "decimals": 2,
                                                                "suffix": ""
                                                            }
                                                        }
                                                    },
                                                    "scale": "ratio",
                                                    "sourceField": "ess.billing.total_ecu"
                                                }
                                            },
                                            "ignoreGlobalFilters": false,
                                            "incompleteColumns": {},
                                            "indexPatternId": "metrics-*",
                                            "sampling": 1
                                        }
                                    }
                                },
                                "indexpattern": {
                                    "layers": {}
                                },
                                "textBased": {
                                    "layers": {}
                                }
                            },
                            "filters": [],
                            "internalReferences": [],
                            "query": {
                                "language": "kuery",
                                "query": "data_stream.dataset :\"ess_billing.billing\" "
                            },
                            "visualization": {
                                "axisTitlesVisibilitySettings": {
                                    "x": false,
                                    "yLeft": false,
                                    "yRight": true
                                },
                                "fittingFunction": "None",
                                "layers": [
                                    {
                                        "accessors": [
                                            "f3a939b5-e9dc-4164-a59f-56e7a9aced2a"
                                        ],
                                        "colorMapping": {
                                            "assignments": [],
                                            "colorMode": {
                                                "type": "categorical"
                                            },
                                            "paletteId": "eui_amsterdam_color_blind",
                                            "specialAssignments": [
                                                {
                                                    "color": {
                                                        "type": "loop"
                                                    },
                                                    "rule": {
                                                        "type": "other"
                                                    },
                                                    "touched": false
                                                }
                                            ]
                                        },
                                        "layerId": "c9af8b12-7fac-4ff6-9e4e-796c744c3f1d",
                                        "layerType": "data",
                                        "position": "top",
                                        "seriesType": "bar_stacked",
                                        "showGridlines": false,
                                        "splitAccessor": "e32c3485-ff5f-41ec-b576-aff6d08672ba",
                                        "xAccessor": "964a9602-36b4-4143-a4a5-4ef2ae4eeb20"
                                    }
                                ],
                                "legend": {
                                    "isVisible": false,
                                    "legendSize": "auto",
                                    "legendStats": [
                                        "total"
                                    ],
                                    "position": "right",
                                    "showSingleSeries": false
                                },
                                "preferredSeriesType": "bar_stacked",
                                "title": "Empty XY chart",
                                "valueLabels": "show"
                            }
                        },
                        "title": "",
                        "type": "lens",
                        "visualizationType": "lnsXY"
                    },
                    "enhancements": {},
                    "timeRange": {
                        "from": "now-1y/d",
                        "to": "now"
                    }
                },
                "gridData": {
                    "h": 9,
                    "i": "c6b9e2d5-f395-4949-92a3-394a454f21c3",
                    "w": 33,
                    "x": 0,
                    "y": 7
                },
                "panelIndex": "c6b9e2d5-f395-4949-92a3-394a454f21c3",
                "title": "Last 12 months",
                "type": "lens"
            },
            {
                "embeddableConfig": {
                    "attributes": {
                        "references": [
                            {
                                "id": "metrics-*",
                                "name": "indexpattern-datasource-layer-e36133f9-69c7-41a4-a64e-743a037c49c5",
                                "type": "index-pattern"
                            },
                            {
                                "id": "metrics-*",
                                "name": "15df6c08-5251-4d97-a2cf-ee80fc3a5c6f",
                                "type": "index-pattern"
                            }
                        ],
                        "state": {
                            "adHocDataViews": {},
                            "datasourceStates": {
                                "formBased": {
                                    "layers": {
                                        "e36133f9-69c7-41a4-a64e-743a037c49c5": {
                                            "columnOrder": [
                                                "b604843e-2086-4a1b-915a-021db0686d46",
                                                "f674062f-6460-4989-ad13-9dc3edf28092",
                                                "ec564519-ada6-4d4f-9ebd-24944db80a37",
                                                "77cb90fb-54c2-4055-a973-512f294d505e",
                                                "9d32655e-ec2b-4849-bea5-b6c9ab30b0e2"
                                            ],
                                            "columns": {
                                                "77cb90fb-54c2-4055-a973-512f294d505e": {
                                                    "customLabel": true,
                                                    "dataType": "date",
                                                    "filter": {
                                                        "language": "kuery",
                                                        "query": "\"ess.billing.start\": *"
                                                    },
                                                    "isBucketed": false,
                                                    "label": "Credit start range",
                                                    "operationType": "last_value",
                                                    "params": {
                                                        "sortField": "@timestamp"
                                                    },
                                                    "scale": "ratio",
                                                    "sourceField": "ess.billing.start"
                                                },
                                                "9d32655e-ec2b-4849-bea5-b6c9ab30b0e2": {
                                                    "customLabel": true,
                                                    "dataType": "date",
                                                    "filter": {
                                                        "language": "kuery",
                                                        "query": "\"ess.billing.end\": *"
                                                    },
                                                    "isBucketed": false,
                                                    "label": "Credit end range",
                                                    "operationType": "last_value",
                                                    "params": {
                                                        "sortField": "@timestamp"
                                                    },
                                                    "scale": "ratio",
                                                    "sourceField": "ess.billing.end"
                                                },
                                                "b604843e-2086-4a1b-915a-021db0686d46": {
                                                    "dataType": "date",
                                                    "isBucketed": true,
                                                    "label": "ess.billing.end",
                                                    "operationType": "date_histogram",
                                                    "params": {
                                                        "dropPartials": false,
                                                        "ignoreTimeRange": true,
                                                        "includeEmptyRows": false,
                                                        "interval": "1M"
                                                    },
                                                    "scale": "interval",
                                                    "sourceField": "ess.billing.end"
                                                },
                                                "ec564519-ada6-4d4f-9ebd-24944db80a37": {
                                                    "customLabel": true,
                                                    "dataType": "number",
                                                    "filter": {
                                                        "language": "kuery",
                                                        "query": "\"ess.billing.ecu_quantity\": *"
                                                    },
                                                    "isBucketed": false,
                                                    "label": "Purchased quantity",
                                                    "operationType": "last_value",
                                                    "params": {
                                                        "format": {
                                                            "id": "number",
                                                            "params": {
                                                                "decimals": 0,
                                                                "suffix": " ECUs"
                                                            }
                                                        },
                                                        "sortField": "@timestamp"
                                                    },
                                                    "scale": "ratio",
                                                    "sourceField": "ess.billing.ecu_quantity"
                                                },
                                                "f674062f-6460-4989-ad13-9dc3edf28092": {
                                                    "customLabel": true,
                                                    "dataType": "number",
                                                    "filter": {
                                                        "language": "kuery",
                                                        "query": "\"ess.billing.ecu_balance\": *"
                                                    },
                                                    "isBucketed": false,
                                                    "label": "Current balance",
                                                    "operationType": "last_value",
                                                    "params": {
                                                        "format": {
                                                            "id": "number",
                                                            "params": {
                                                                "decimals": 0,
                                                                "suffix": " ECUs"
                                                            }
                                                        },
                                                        "sortField": "@timestamp"
                                                    },
                                                    "scale": "ratio",
                                                    "sourceField": "ess.billing.ecu_balance"
                                                }
                                            },
                                            "ignoreGlobalFilters": false,
                                            "incompleteColumns": {},
                                            "sampling": 1
                                        }
                                    }
                                },
                                "indexpattern": {
                                    "layers": {}
                                },
                                "textBased": {
                                    "layers": {}
                                }
                            },
                            "filters": [
                                {
                                    "$state": {
                                        "store": "appState"
                                    },
                                    "meta": {
                                        "alias": null,
                                        "disabled": false,
                                        "field": "event.dataset",
                                        "index": "15df6c08-5251-4d97-a2cf-ee80fc3a5c6f",
                                        "key": "event.dataset",
                                        "negate": false,
                                        "params": {
                                            "query": "ess_billing.credits"
                                        },
                                        "type": "phrase"
                                    },
                                    "query": {
                                        "match_phrase": {
                                            "event.dataset": "ess_billing.credits"
                                        }
                                    }
                                }
                            ],
                            "internalReferences": [],
                            "query": {
                                "language": "kuery",
                                "query": "ess.billing.end \u003e= now-1M/M AND ess.billing.ecu_balance \u003e 0 AND @timestamp \u003e now-24h"
                            },
                            "visualization": {
                                "columns": [
                                    {
                                        "columnId": "202339d9-9b22-47b2-a22a-cd5fc17ed2de",
                                        "isMetric": false,
                                        "isTransposed": false
                                    },
                                    {
                                        "columnId": "f674062f-6460-4989-ad13-9dc3edf28092",
                                        "isMetric": true,
                                        "isTransposed": false
                                    },
                                    {
                                        "columnId": "77cb90fb-54c2-4055-a973-512f294d505e",
                                        "isMetric": true,
                                        "isTransposed": false
                                    },
                                    {
                                        "columnId": "b604843e-2086-4a1b-915a-021db0686d46",
                                        "hidden": true,
                                        "isMetric": false,
                                        "isTransposed": false
                                    },
                                    {
                                        "columnId": "9d32655e-ec2b-4849-bea5-b6c9ab30b0e2",
                                        "isMetric": true,
                                        "isTransposed": false
                                    },
                                    {
                                        "columnId": "ec564519-ada6-4d4f-9ebd-24944db80a37",
                                        "isMetric": true,
                                        "isTransposed": false
                                    }
                                ],
                                "layerId": "e36133f9-69c7-41a4-a64e-743a037c49c5",
                                "layerType": "data"
                            }
                        },
                        "title": "",
                        "type": "lens",
                        "visualizationType": "lnsDatatable"
                    },
                    "enhancements": {}
                },
                "gridData": {
                    "h": 12,
                    "i": "1f655c61-d58a-499d-a97a-81afe305deab",
                    "w": 33,
                    "x": 0,
                    "y": 16
                },
                "panelIndex": "1f655c61-d58a-499d-a97a-81afe305deab",
                "type": "lens"
            },
            {
                "embeddableConfig": {
                    "enhancements": {
                        "dynamicActions": {
                            "events": []
                        }
                    },
                    "savedVis": {
                        "data": {
                            "aggs": [],
                            "searchSource": {
                                "filter": [],
                                "query": {
                                    "language": "kuery",
                                    "query": ""
                                }
                            }
                        },
                        "description": "",
                        "id": "",
                        "params": {
                            "fontSize": 12,
                            "markdown": "# 🪙 Credits dashboard\n\nDisplaying this dashboard correctly requires an existing active commercial commitment with Elastic.",
                            "openLinksInNewTab": false
                        },
                        "title": "",
                        "type": "markdown",
                        "uiState": {}
                    }
                },
                "gridData": {
                    "h": 12,
                    "i": "ba7836ee-2818-4aba-b8c4-85cd55fc6478",
                    "w": 15,
                    "x": 33,
                    "y": 16
                },
                "panelIndex": "ba7836ee-2818-4aba-b8c4-85cd55fc6478",
                "type": "visualization"
            }
        ],
        "timeRestore": false,
        "title": "[Metrics ESS Billing] Credits dashboard",
        "version": 3
    },
    "coreMigrationVersion": "8.8.0",
    "created_at": "2025-08-25T09:46:29.932Z",
    "id": "ess_billing-creditsdashboard",
    "references": [
        {
            "id": "metrics-*",
            "name": "da3e016c-9d68-4089-a0d1-b1e643f1f317:indexpattern-datasource-layer-8c4e8172-eb9b-4d3b-822d-2cf041d9a9af",
            "type": "index-pattern"
        },
        {
            "id": "metrics-*",
            "name": "a2fbfbeb-1229-4dae-9474-31804b2cc512:indexpattern-datasource-layer-8c4e8172-eb9b-4d3b-822d-2cf041d9a9af",
            "type": "index-pattern"
        },
        {
            "id": "metrics-*",
            "name": "b577ecaf-2704-4c97-bf70-9866f57e76c7:indexpattern-datasource-layer-1aabb792-21de-41ae-85fe-9a5f9f703ab2",
            "type": "index-pattern"
        },
        {
            "id": "metrics-*",
            "name": "b577ecaf-2704-4c97-bf70-9866f57e76c7:1f32bbe8-1ddb-4451-a2e5-2d1966b2eb40",
            "type": "index-pattern"
        },
        {
            "id": "metrics-*",
            "name": "b577ecaf-2704-4c97-bf70-9866f57e76c7:80b4065a-cd81-4033-b91c-72ef158f3934",
            "type": "index-pattern"
        },
        {
            "id": "metrics-*",
            "name": "c6b9e2d5-f395-4949-92a3-394a454f21c3:indexpattern-datasource-layer-c9af8b12-7fac-4ff6-9e4e-796c744c3f1d",
            "type": "index-pattern"
        },
        {
            "id": "metrics-*",
            "name": "1f655c61-d58a-499d-a97a-81afe305deab:indexpattern-datasource-layer-e36133f9-69c7-41a4-a64e-743a037c49c5",
            "type": "index-pattern"
        },
        {
            "id": "metrics-*",
            "name": "1f655c61-d58a-499d-a97a-81afe305deab:15df6c08-5251-4d97-a2cf-ee80fc3a5c6f",
            "type": "index-pattern"
        },
        {
            "id": "ess_billing-billingdashboard",
            "name": "76f552c2-c774-4cae-b875-c44440b070d2:link_41ef1269-cf4b-479b-b6b1-e259df2f610e_dashboard",
            "type": "dashboard"
        },
        {
            "id": "ess_billing-creditsdashboard",
            "name": "76f552c2-c774-4cae-b875-c44440b070d2:link_94e5341a-801b-40fd-91d5-69d0da0b2a83_dashboard",
            "type": "dashboard"
        },
        {
            "id": "logs-*",
            "name": "827e1ba3-a36c-4018-bba5-743d18255607:kibanaSavedObjectMeta.searchSourceJSON.filter[0].meta.index",
            "type": "index-pattern"
        },
        {
            "id": "metrics-*",
            "name": "controlGroup_cb35ffdb-1f17-4c9f-b589-a06d66dd0cee:optionsListDataView",
            "type": "index-pattern"
        }
    ],
    "type": "dashboard",
    "typeMigrationVersion": "10.2.0"
}