{
  "id": "mysql-replication-lag",
  "type": "alerting_rule_template",
  "attributes": {
    "name": "[MySQL Replica] Replication Lag High",
    "tags": ["MySQL Replica"],
    "ruleTypeId": ".es-query",
    "schedule": {
      "interval": "1m"
    },
    "params": {
      "searchType": "esqlQuery",
      "timeWindowSize": 15,
      "timeWindowUnit": "m",
      "esqlQuery": {
        "esql": "// The recommended threshold value for seconds behind source is > 10, and the alerting rule is grouped by host name and channel name. You can adjust the threshold value by modifying the secondsbehind value in the WHERE clause, which is specified in seconds.\nFROM metrics-mysql.replica_status-default\n| STATS secondsbehind=max(mysql.replica_status.seconds_behind_source) by host.name, mysql.replica_status.channel.name\n| WHERE secondsbehind > 10"
      },
      "groupBy": "row",
      "timeField": "@timestamp"
    },
    "alertDelay": {
      "active": 1
    }
  },
  "managed": true,
  "coreMigrationVersion": "8.8.0",
  "typeMigrationVersion": "10.1.0"
}