- name: kafka.replica_manager
  type: group
  description: >
    Kafka replica manager metrics.
  fields:
    - name: metric_fingerprint
      type: keyword
      dimension: true
      description: >
        A fingerprint of the metric path.

    - name: replica_alter_log_dirs_manager
      type: group
      description: >
        Kafka ReplicaAlterLogDirsManager metrics.
      fields:
        - name: dead_thread_count
          type: double
          metric_type: gauge
          description: >
            Number of dead threads in the ReplicaAlterLogDirsManager.

        - name: failed_partitions_count
          type: double
          metric_type: gauge
          description: >
            Number of failed partitions in the ReplicaAlterLogDirsManager.

        - name: max_lag
          type: double
          metric_type: gauge
          description: >
            Maximum lag for the ReplicaAlterLogDirsManager.

        - name: min_fetch_rate
          type: double
          metric_type: gauge
          description: >
            Minimum fetch rate for the ReplicaAlterLogDirsManager.

    - name: replica_fetcher_manager
      type: group
      description: >
        Kafka ReplicaFetcherManager metrics.
      fields:
        - name: dead_thread_count
          type: double
          metric_type: gauge
          description: >
            Number of dead threads in the ReplicaFetcherManager.

        - name: failed_partitions_count
          type: double
          metric_type: gauge
          description: >
            Number of failed partitions in the ReplicaFetcherManager.

        - name: max_lag
          type: double
          metric_type: gauge
          description: >
            Maximum lag for the ReplicaFetcherManager.

        - name: min_fetch_rate
          type: float
          metric_type: gauge
          description: >
            Minimum fetch rate for the ReplicaFetcherManager.

    - name: at_min_isr_partition_count
      type: double
      metric_type: gauge
      description: >
        Number of partitions that are at minimum in-sync replica count.

    - name: failed_isr_updates_per_sec
      type: group
      description: >
        Rate of failed ISR update operations.
      fields:
        - name: one_minute_rate
          type: float
          metric_type: gauge
          description: >
            One-minute rate of failed ISR update operations.

    - name: isr_expands_per_sec
      type: group
      description: >
        Rate of ISR expansion operations.
      fields:
        - name: one_minute_rate
          type: float
          metric_type: gauge
          description: >
            One-minute rate of ISR expansion operations.

    - name: isr_shrinks_per_sec
      type: group
      description: >
        Rate of ISR shrink operations.
      fields:
        - name: one_minute_rate
          type: float
          metric_type: gauge
          description: >
            One-minute rate of ISR shrink operations.

    - name: leader_count
      type: double
      metric_type: gauge
      description: >
        Number of partitions that the broker leads.

    - name: offline_replica_count
      type: double
      metric_type: gauge
      description: >
        Number of offline replicas.

    - name: partition_count
      type: double
      metric_type: gauge
      description: >
        Total number of partitions.

    - name: partitions_with_late_transactions_count
      type: double
      metric_type: gauge
      description: >
        Number of partitions with late transactions.

    - name: producer_id_count
      type: double
      metric_type: gauge
      description: >
        Number of producer IDs.

    - name: reassigning_partitions
      type: double
      metric_type: gauge
      description: >
        Number of partitions that are currently being reassigned.

    - name: under_min_isr_partition_count
      type: double
      metric_type: gauge
      description: >
        Number of partitions that are under minimum in-sync replica count.

    - name: under_replicated_partitions
      type: double
      metric_type: gauge
      description: >
        Number of under-replicated partitions.
