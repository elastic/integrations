receivers:
  hostmetrics:
    collection_interval: {{period}}
    scrapers:
      {{#if cpu }}
      cpu:
        metrics:
          system.cpu.utilization:
            enabled: true
          system.cpu.logical.count:
            enabled: true
      {{/if}}
      {{#if memory }}
      memory:
        metrics:
          system.memory.utilization:
            enabled: true
      {{/if}}
      {{#if process }}
      process:
        metrics:
          process.threads:
            enabled: true
          process.open_file_descriptors:
            enabled: true
          process.memory.utilization:
            enabled: true
          process.disk.operations:
            enabled: true
      {{/if}}
      {{#if network }}
      network:
      {{/if}}
      {{#if processes }}
      processes:
      {{/if}}
      {{#if load }}
      load:
      {{/if}}
      {{#if disk }}
      disk:
      {{/if}}
      {{#if filesystem }}
      filesystem:
      {{/if}}
processors:
  resourcedetection:
    detectors: ["system"]
    system:
      hostname_sources: ["os"]
      resource_attributes:
        host.name:
          enabled: true
        host.id:
          enabled: false
        host.arch:
          enabled: true
        host.ip:
          enabled: true
        host.mac:
          enabled: true
        host.cpu.vendor.id:
          enabled: true
        host.cpu.family:
          enabled: true
        host.cpu.model.id:
          enabled: true
        host.cpu.model.name:
          enabled: true
        host.cpu.stepping:
          enabled: true
        host.cpu.cache.l2.size:
          enabled: true
        os.description:
          enabled: true
        os.type:
          enabled: true
          
service:
  pipelines:
    metrics:
      receivers: [hostmetrics]
      processors: [resourcedetection]