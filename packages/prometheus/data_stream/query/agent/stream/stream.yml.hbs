metricsets: ["query"]
hosts:
{{#each hosts}}
  - {{this}}
{{/each}}
period: {{period}}
{{#if bearer_token_file}}
bearer_token_file: {{bearer_token_file}}
{{/if}}
ssl.verification_mode: {{ssl.verification_mode}}
{{#if ssl.certificate_authorities}}
ssl.certificate_authorities:
{{#each ssl.certificate_authorities}}
  - {{this}}
{{/each}}
{{/if}}
{{#if ssl.certificate}}
ssl.certificate: {{ssl.certificate}}
{{/if}}
{{#if ssl.key}}
ssl.key: {{ssl.key}}
{{/if}}
{{#if ssl.key_passphrase}}
ssl.key_passphrase: {{ssl.key_passphrase}}
{{/if}}
{{#if ssl.ca_trusted_fingerprint}}
ssl.ca_trusted_fingerprint: {{ssl.ca_trusted_fingerprint}}
{{/if}}
username: {{username}}
password: {{password}}
queries: {{queries}}
{{#if leaderelection}}
condition: ${kubernetes_leaderelection.leader} == true
{{/if}}
data_stream:
  dataset: {{data_stream.dataset}}
{{#if processors}}
processors:
{{processors}}
{{/if}}
{{#if custom}}
{{custom}}
{{/if}}