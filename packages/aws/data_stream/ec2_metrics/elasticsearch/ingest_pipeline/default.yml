---
description: "Pipeline for EC2 metrics"

processors:
  - rename:
      field: aws.ec2.metrics.CPUCreditUsage.avg
      target_field: aws.ec2.cpu.credit_usage
      ignore_missing: true
  - rename:
      field: aws.ec2.metrics.CPUCreditBalance.avg
      target_field: aws.ec2.cpu.credit_balance
      ignore_missing: true
  - rename:
      field: aws.ec2.metrics.CPUSurplusCreditBalance.avg
      target_field: aws.ec2.cpu.surplus_credit_balance
      ignore_missing: true
  - rename:
      field: aws.ec2.metrics.CPUSurplusCreditsCharged.avg
      target_field: aws.ec2.cpu.surplus_credits_charged
      ignore_missing: true
  - rename:
      field: aws.ec2.metrics.StatusCheckFailed.avg
      target_field: aws.ec2.status.check_failed
      ignore_missing: true
  - rename:
      field: aws.ec2.metrics.StatusCheckFailed_Instance.avg
      target_field: aws.ec2.status.check_failed_instance
      ignore_missing: true
  - rename:
      field: aws.ec2.metrics.StatusCheckFailed_System.avg
      target_field: aws.ec2.status.check_failed_system
      ignore_missing: true
  - rename:
      field: aws.ec2.metrics.NetworkIn.rate
      target_field: aws.ec2.network.in.bytes_per_sec
      ignore_missing: true
  - rename:
      field: aws.ec2.metrics.NetworkOut.rate
      target_field: aws.ec2.network.out.bytes_per_sec
      ignore_missing: true
  - rename:
      field: aws.ec2.metrics.NetworkPacketsIn.rate
      target_field: aws.ec2.network.in.packets_per_sec
      ignore_missing: true
  - rename:
      field: aws.ec2.metrics.NetworkPacketsOut.rate
      target_field: aws.ec2.network.out.packets_per_sec
      ignore_missing: true
  - rename:
      field: aws.ec2.metrics.DiskReadBytes.rate
      target_field: aws.ec2.diskio.read.bytes_per_sec
      ignore_missing: true
  - rename:
      field: aws.ec2.metrics.DiskWriteBytes.rate
      target_field: aws.ec2.diskio.write.bytes_per_sec
      ignore_missing: true
  - rename:
      field: aws.ec2.metrics.DiskReadOps.rate
      target_field: aws.ec2.diskio.read.count_per_sec
      ignore_missing: true
  - rename:
      field: aws.ec2.metrics.DiskWriteOps.rate
      target_field: aws.ec2.diskio.write.count_per_sec
      ignore_missing: true
  - remove:
      field:
        - aws.ec2.metrics
        - aws.ec2.cpu.total.pct
        - aws.ec2.diskio.read.bytes
        - aws.ec2.diskio.read.count
        - aws.ec2.diskio.write.bytes
        - aws.ec2.diskio.write.count
        - aws.ec2.network.in.bytes
        - aws.ec2.network.in.packets
        - aws.ec2.network.out.bytes
        - aws.ec2.network.out.packets
      ignore_missing: true