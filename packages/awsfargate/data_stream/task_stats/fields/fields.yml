- name: awsfargate.task_stats
  type: group
  fields:
    - name: cluster_name
      type: keyword
      description: Cluster name
    - name: task_name
      type: keyword
      description: ECS task name
    - name: identifier
      type: keyword
      description: |
        Container identifier across tasks and clusters, which equals to container.name + '/' + container.id.
    - name: task_desired_status
      type: keyword
      description: |
        The desired status for the task from Amazon ECS.
    - name: task_known_status
      type: keyword
      description: |
        The known status for the task from Amazon ECS.
    - name: cpu
      type: group
      fields:
        - name: core.*.pct
          type: scaled_float
          metric_type: gauge
          format: percent
          description: |
            Percentage of time per CPU core.
        - name: core.*.norm.pct
          type: scaled_float
          metric_type: gauge
          format: percent
          description: |
            Percentage of time per CPU core normalized by the number of CPU cores.
        - name: core.*.ticks
          type: long
          metric_type: counter
          description: |
            CPU ticks per CPU core.
        - name: kernel.pct
          type: scaled_float
          metric_type: gauge
          format: percent
          description: |
            Percentage of time in kernel space.
        - name: kernel.norm.pct
          type: scaled_float
          metric_type: gauge
          format: percent
          description: |
            Percentage of time in kernel space normalized by the number of CPU cores.
        - name: kernel.ticks
          type: long
          metric_type: counter
          description: |
            CPU ticks in kernel space.
        - name: system.pct
          type: scaled_float
          format: percent
          metric_type: gauge
          description: |
            Percentage of total CPU time in the system.
        - name: system.norm.pct
          type: scaled_float
          format: percent
          metric_type: gauge
          description: |
            Percentage of total CPU time in the system normalized by the number of CPU cores.
        - name: system.ticks
          type: long
          metric_type: counter
          description: |
            CPU system ticks.
        - name: user.pct
          type: scaled_float
          metric_type: gauge
          format: percent
          description: |
            Percentage of time in user space.
        - name: user.norm.pct
          type: scaled_float
          metric_type: gauge
          format: percent
          description: |
            Percentage of time in user space normalized by the number of CPU cores.
        - name: user.ticks
          type: long
          metric_type: counter
          description: |
            CPU ticks in user space.
        - name: total.pct
          type: scaled_float
          format: percent
          metric_type: gauge
          description: |
            Total CPU usage.
        - name: total.norm.pct
          type: scaled_float
          metric_type: gauge
          format: percent
          description: |
            Total CPU usage normalized by the number of CPU cores.
    - name: diskio
      type: group
      fields:
        - name: read
          type: group
          fields:
            - name: ops
              type: long
              metric_type: counter
              description: |
                Number of reads during the life of the container
            - name: bytes
              type: long
              format: bytes
              metric_type: counter
              description: |
                Bytes read during the life of the container
            - name: rate
              type: long
              metric_type: gauge
              description: |
                Number of current reads per second
            - name: service_time
              type: long
              metric_type: counter
              description: |
                Total time to service IO requests, in nanoseconds
            - name: wait_time
              type: long
              metric_type: counter
              description: |
                Total time requests spent waiting in queues for service, in nanoseconds
            - name: queued
              type: long
              metric_type: counter
              description: |
                Total number of queued requests
        - name: reads
          type: scaled_float
          metric_type: gauge
          description: |
            Number of current reads per second
        - name: write
          type: group
          fields:
            - name: ops
              type: long
              metric_type: counter
              description: |
                Number of writes during the life of the container
            - name: bytes
              type: long
              format: bytes
              metric_type: counter
              description: |
                Bytes written during the life of the container
            - name: rate
              type: long
              metric_type: gauge
              description: |
                Number of current writes per second
            - name: service_time
              type: long
              metric_type: counter
              description: |
                Total time to service IO requests, in nanoseconds
            - name: wait_time
              type: long
              metric_type: counter
              description: |
                Total time requests spent waiting in queues for service, in nanoseconds
            - name: queued
              type: long
              metric_type: counter
              description: |
                Total number of queued requests
        - name: writes
          type: scaled_float
          metric_type: gauge
          description: |
            Number of current writes per second
        - name: summary
          type: group
          fields:
            - name: ops
              type: long
              metric_type: counter
              description: |
                Number of I/O operations during the life of the container
            - name: bytes
              type: long
              metric_type: counter
              format: bytes
              description: |
                Bytes read and written during the life of the container
            - name: rate
              type: long
              metric_type: gauge
              description: |
                Number of current operations per second
            - name: service_time
              type: long
              metric_type: counter
              description: |
                Total time to service IO requests, in nanoseconds
            - name: wait_time
              type: long
              metric_type: counter
              description: |
                Total time requests spent waiting in queues for service, in nanoseconds
            - name: queued
              type: long
              metric_type: counter
              description: |
                Total number of queued requests
        - name: total
          type: scaled_float
          metric_type: gauge
          description: |
            Number of reads and writes per second
    - name: memory
      type: group
      fields:
        - name: commit
          type: group
          description: >
            Committed bytes on Windows

          fields:
            - name: total
              type: long
              metric_type: counter
              format: bytes
              description: >
                Total bytes

            - name: peak
              type: long
              metric_type: counter
              format: bytes
              description: >
                Peak committed bytes on Windows

        - name: private_working_set.total
          type: long
          metric_type: gauge
          format: bytes
          description: >
            Private working sets on Windows

        - name: fail.count
          type: scaled_float
          metric_type: counter
          description: |
            Fail counter.
        - name: limit
          type: long
          metric_type: gauge
          format: bytes
          description: |
            Memory limit.
        - name: rss
          type: group
          fields:
            - name: total
              type: long
              metric_type: gauge
              format: bytes
              description: |
                Total memory resident set size.
            - name: pct
              type: scaled_float
              metric_type: gauge
              format: percent
              description: |
                Memory resident set size percentage.
            - name: usage
              type: group
              fields:
                - name: max
                  type: long
                  metric_type: counter
                  format: bytes
                  description: |
                    Max memory usage.
                - name: pct
                  type: scaled_float
                  metric_type: gauge
                  format: percent
                  description: |
                    Memory usage percentage.
                - name: total
                  type: long
                  metric_type: gauge
                  format: bytes
                  description: |
                    Total memory usage.
        - name: stats.*
          type: unsigned_long
          description: |
            Raw memory stats from the cgroups memory.stat interface
        - name: usage
          type: group
          fields:
            - name: max
              type: long
              metric_type: counter
              format: bytes
              description: |
                Max memory usage.
            - name: total
              type: long
              metric_type: gauge
              format: bytes
              description: |
                Total memory usage.
    - name: network.*.inbound
      type: group
      fields:
        - name: bytes
          type: long
          metric_type: counter
          format: bytes
          description: |
            Total number of incoming bytes.
        - name: dropped
          type: long
          metric_type: counter
          description: |
            Total number of dropped incoming packets.
        - name: errors
          type: long
          metric_type: counter
          description: |
            Total errors on incoming packets.
        - name: packets
          type: long
          metric_type: counter
          description: |
            Total number of incoming packets.
    - name: network.*.outbound
      type: group
      fields:
        - name: bytes
          type: long
          metric_type: counter
          format: bytes
          description: |
            Total number of incoming bytes.
        - name: dropped
          type: long
          metric_type: counter
          description: |
            Total number of dropped incoming packets.
        - name: errors
          type: long
          metric_type: counter
          description: |
            Total errors on incoming packets.
        - name: packets
          type: long
          metric_type: counter
          description: |
            Total number of incoming packets.
