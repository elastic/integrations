version: "3"
services:
  hadoop:
    # image: apache/hadoop:${HADOOP_VERSION}
    build:
      context: ./Dockerfiles
      dockerfile: Dockerfile-namenode
    hostname: namenode
    command: ["hdfs", "namenode"]
    ports:
      - 7777
      - 50070
      - 9870
    env_file:
      - config
    environment:
      ENSURE_NAMENODE_DIR: "/tmp/hadoop-hadoop/dfs/name"
  # datanode:
  #    # image: apache/hadoop:${HADOOP_VERSION}
  #    build: .
  #    command: ["hdfs", "datanode"]
  #    ports:
  #       - 9864:9864
  #    links:
  #       - namenode
  #    env_file:
  #      - config
  # resourcemanager:
  #    image: apache/hadoop:${HADOOP_VERSION}
  #    hostname: resourcemanager
  #    command: ["yarn", "resourcemanager"]
  #    ports:
  #       - 8088:8088
  #    env_file:
  #      - config
  #    volumes:
  #      - ./testdata:/opt/testdata
  # nodemanager:
  #    image: apache/hadoop:${HADOOP_VERSION}
  #    command: ["yarn","nodemanager"]
  #    ports:
  #       - 8042:8042
  #    links:
  #       - resourcemanager
  #       - namenode
  #    env_file:
  #      - config
