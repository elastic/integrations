# Amazon Bedrock AgentCore

## Overview

Amazon Bedrock AgentCore is a fully-managed platform that empowers you to build, deploy and operate intelligent agents using any framework or foundation model, while eliminating the burden of managing agent infrastructure. It is composed of modular capabilities such as Runtime, Gateway, Memory, Identity, Observability, Code Interpreter, and Browser Toolâ€”enabling you to focus on crafting the agent workflows that interact with your systems and data.

The Amazon Bedrock AgentCore integration enables seamless monitoring of your intelligent agents by collecting comprehensive runtime metrics and observability data. This integration provides visibility into agent execution activity, performance metrics, resource utilization, error rates, and operational insights essential for maintaining optimal agent performance.


**IMPORTANT: Extra AWS charges on API requests will be generated by this integration. Check [API Requests](https://www.elastic.co/docs/current/integrations/aws#api-requests) for more details.**

### Compatibility

This integration is compatible with Amazon Bedrock AgentCore CloudWatch metrics and supports the AWS/Bedrock-AgentCore namespace for comprehensive observability data collection.

## What data does this integration collect?

The Amazon Bedrock AgentCore integration collects runtime metrics and observability data from your intelligent agents.

Data streams:
 - `metrics`: Collects Amazon Bedrock AgentCore runtime metrics including invocations, sessions, latency, performance indicators, error rates, throttling metrics, token counts, target execution metrics, and authorization metrics from the following AgentCore components: Agent runtime, Gateways, Memory, and Identity.

## What do I need to use this integration?

You need Elasticsearch for storing and searching your data and Kibana for visualizing and managing it. You can use our hosted Elasticsearch Service on Elastic Cloud, which is recommended, or self-manage the Elastic Stack on your own hardware.

Before using any Amazon Bedrock AgentCore integration you will need:

* **AWS Credentials** to connect with your AWS account.
* **AWS Permissions** to make sure the user you're using to connect has permission to share the relevant data.

For more details about these requirements, check the [AWS integration documentation](https://docs.elastic.co/integrations/aws#requirements).

* Elastic Agent must be installed. For detailed guidance, follow these [instructions](https://www.elastic.co/guide/en/fleet/current/elastic-agent-installation.html).
* You can install only one Elastic Agent per host.
* Elastic Agent is required to collect metrics from CloudWatch and ship the data to Elastic, where the events will then be processed through the integration's ingest pipelines.

## Setup

To use the Amazon Bedrock AgentCore metrics, ensure your agents are deployed and running. The integration will automatically collect metrics from the AWS/Bedrock-AgentCore CloudWatch namespace. For enhanced observability, enable detailed monitoring and logging for your AgentCore resources.

For more details about enabling observability for AgentCore, check the [Amazon Bedrock AgentCore Observability Guide](https://docs.aws.amazon.com/bedrock-agentcore/latest/devguide/observability-runtime-metrics.html).

## Metrics

### Runtime Metrics

Amazon Bedrock AgentCore runtime metrics provide comprehensive visibility into your agent execution and performance. The integration collects the following categories of metrics:

These metrics enable several use cases, such as:
- Monitoring agent performance and response times
- Tracking resource consumption for cost optimization
- Identifying and troubleshooting error patterns
- Analyzing agent usage patterns and scaling requirements
- Monitoring authorization and access control effectiveness

**Dimensions:**

The metrics include the following dimensions for enhanced filtering and analysis:
- `Operation`: The operation name performed by the agent
- `Resource`: The Amazon Resource Name (ARN) of the agent resource
- `AgentId`: The unique identifier of the agent
- `EndpointName`: The name of the agent endpoint
- `SessionId`: The session identifier for agent invocations

An example event for `metrics` looks as following:

```json
{
    "@timestamp": "2025-11-11T18:25:00.000Z",
    "agent": {
        "ephemeral_id": "76c9ae9c-f0bd-4b82-8157-161deacb8d15",
        "id": "f3b14aaf-60db-49eb-b0aa-5b15ac26df85",
        "name": "elastic-agent-64028",
        "type": "metricbeat",
        "version": "8.19.0"
    },
    "aws": {
        "bedrock_agentcore": {
            "metrics": {
                "ResourceAccessTokenFetchSuccess": {
                    "sum": 1
                },
                "WorkloadAccessTokenFetchSuccess": {
                    "sum": 1
                }
            }
        },
        "cloudwatch": {
            "namespace": "AWS/Bedrock-AgentCore"
        }
    },
    "cloud": {
        "account": {
            "id": "121212121212",
            "name": "MonitoringAccount"
        },
        "provider": "aws",
        "region": "us-east-1"
    },
    "data_stream": {
        "dataset": "aws_bedrock_agentcore.metrics",
        "namespace": "41789",
        "type": "metrics"
    },
    "ecs": {
        "version": "8.0.0"
    },
    "elastic_agent": {
        "id": "f3b14aaf-60db-49eb-b0aa-5b15ac26df85",
        "snapshot": false,
        "version": "8.19.0"
    },
    "event": {
        "agent_id_status": "verified",
        "dataset": "aws_bedrock_agentcore.metrics",
        "duration": 11849440086,
        "ingested": "2025-11-11T18:32:13Z",
        "module": "aws"
    },
    "host": {
        "architecture": "x86_64",
        "containerized": false,
        "hostname": "elastic-agent-64028",
        "ip": [
            "172.19.0.7",
            "172.31.0.2"
        ],
        "mac": [
            "82-28-2D-42-E6-26",
            "AA-84-46-63-32-4C"
        ],
        "name": "elastic-agent-64028",
        "os": {
            "family": "",
            "kernel": "6.14.0-1006-gcp",
            "name": "Wolfi",
            "platform": "wolfi",
            "type": "linux",
            "version": "20230201"
        }
    },
    "metricset": {
        "name": "cloudwatch",
        "period": 300000
    },
    "service": {
        "type": "aws"
    }
}
```
**Exported fields**

| Field | Description | Type | Unit | Metric Type |
|---|---|---|---|---|
| @timestamp | Event timestamp. | date |  |  |
| agent.id | Unique identifier of this agent (if one exists). Example: For Beats this would be beat.id. | keyword |  |  |
| aws.bedrock_agentcore.metrics.ApiKeyFetchFailures.sum | Total number of failed API key fetch operations from credential providers. | long |  | gauge |
| aws.bedrock_agentcore.metrics.ApiKeyFetchSuccess.sum | Total number of successful API key fetch operations from credential providers. | long |  | gauge |
| aws.bedrock_agentcore.metrics.ApiKeyFetchThrottles.sum | Total number of throttled API key fetch operations from credential providers. | long |  | gauge |
| aws.bedrock_agentcore.metrics.CallCount.sum | Total number of calls made to Identity Service operations. | long |  | gauge |
| aws.bedrock_agentcore.metrics.CreationCount.sum | Total number of resources created. | long |  | gauge |
| aws.bedrock_agentcore.metrics.Duration.avg | Average duration of agent execution for each request. | double | ms | gauge |
| aws.bedrock_agentcore.metrics.Errors.sum | Total number of errors encountered during agent execution. | long |  | gauge |
| aws.bedrock_agentcore.metrics.InboundAuthorizationFailure.sum | Total number of inbound authorization failures. | long |  | gauge |
| aws.bedrock_agentcore.metrics.InboundAuthorizationSuccess.sum | Total number of successful inbound authorizations. | long |  | gauge |
| aws.bedrock_agentcore.metrics.Invocations.sum | Total number of requests made to the Data Plane API. | long |  | gauge |
| aws.bedrock_agentcore.metrics.Latency.avg | Average time elapsed between receiving the request and sending the final response token. | double | ms | gauge |
| aws.bedrock_agentcore.metrics.ResourceAccessTokenFetchFailures.sum | Total number of failures in fetching resource access tokens. | long |  | gauge |
| aws.bedrock_agentcore.metrics.ResourceAccessTokenFetchSuccess.sum | Total number of successful fetches of resource access tokens. | long |  | gauge |
| aws.bedrock_agentcore.metrics.ResourceAccessTokenFetchThrottles.sum | Total number of throttled OAuth2 token fetch operations from credential providers. | long |  | gauge |
| aws.bedrock_agentcore.metrics.Sessions.sum | Total number of agent sessions initiated. | long |  | gauge |
| aws.bedrock_agentcore.metrics.SystemErrors.sum | Total number of server-side errors indicating infrastructure or service issues. | long |  | gauge |
| aws.bedrock_agentcore.metrics.TargetExecutionTime.avg | Average execution time for each target type. | double | ms | gauge |
| aws.bedrock_agentcore.metrics.TargetType_LAMBDA.sum | Total number of invocations targeting AWS Lambda. | long |  | gauge |
| aws.bedrock_agentcore.metrics.TargetType_MCP.sum | Total number of invocations targeting MCP (Model Context Protocol). | long |  | gauge |
| aws.bedrock_agentcore.metrics.ThrottleCount.sum | Total number of throttled calls for Identity Service operations. | long |  | gauge |
| aws.bedrock_agentcore.metrics.Throttles.sum | Total number of requests throttled due to exceeding allowed TPS or quota limits. | long |  | gauge |
| aws.bedrock_agentcore.metrics.TokenCount.sum | Total number of tokens processed during agent execution. | long |  | gauge |
| aws.bedrock_agentcore.metrics.UserErrors.sum | Total number of client-side errors resulting from invalid requests. | long |  | gauge |
| aws.bedrock_agentcore.metrics.WorkloadAccessTokenFetchFailures.sum | Total number of failures in fetching workload access tokens. | long |  | gauge |
| aws.bedrock_agentcore.metrics.WorkloadAccessTokenFetchSuccess.sum | Total number of successful fetches of workload access tokens. | long |  | gauge |
| aws.bedrock_agentcore.metrics.WorkloadAccessTokenFetchThrottles.sum | Total number of throttled workload access token fetch operations. | long |  | gauge |
| aws.cloudwatch.namespace | The namespace specified when query cloudwatch api. | keyword |  |  |
| aws.dimensions.\* | Metric dimensions. | keyword |  |  |
| aws.dimensions_fingerprint | Autogenerated ID representing the fingerprint of the aws.dimensions object | keyword |  |  |
| cloud.account.id | The cloud account or organization id used to identify different entities in a multi-tenant environment. Examples: AWS account id, Google Cloud ORG Id, or other unique identifier. | keyword |  |  |
| cloud.region | Region in which this host, resource, or service is located. | keyword |  |  |
| data_stream.dataset | Data stream dataset. | constant_keyword |  |  |
| data_stream.namespace | Data stream namespace. | constant_keyword |  |  |
| data_stream.type | Data stream type. | constant_keyword |  |  |
| event.module | Name of the module this data is coming from. If your monitoring agent supports the concept of modules or plugins to process events of a given source (e.g. Apache logs), `event.module` should contain the name of this module. | constant_keyword |  |  |


## Logs

### Runtime Application Logs

Amazon Bedrock AgentCore runtime application logs provide detailed insights into agent execution, decision-making processes, and operational events. The integration collects comprehensive log data from your intelligent agents to help you understand agent behavior and troubleshoot issues.

For more details about enabling logs for AgentCore, check the [Amazon Bedrock AgentCore Observability Guide](https://docs.aws.amazon.com/bedrock-agentcore/latest/devguide/observability-view.html).

An example event for `runtime_application` looks as following:

```json
{
    "@timestamp": "2025-03-15T09:27:18.543Z",
    "agent": {
        "ephemeral_id": "f8a9c21d-3b4e-4f92-a1c7-9d2e4f6b8a3c",
        "id": "2c4d6e8f-9a1b-4c3d-8e2f-7a9b3c5d1e6f",
        "name": "docker-fleet-agent",
        "type": "filebeat",
        "version": "9.1.0"
    },
    "aws": {
        "cloudwatch": {
            "ingestion_time": "2025-03-15T09:31:45.892Z",
            "log_group": "arn:aws:logs:eu-west-2:892547316820:log-group:/aws/vendedlogs/bedrock-agentcore/runtime/APPLICATION_LOGS/claudeserver-Xy7Mn5TqR3",
            "log_stream": "BedrockAgentCoreRuntime_ApplicationLogs"
        }
    },
    "aws_bedrock_agentcore": {
        "runtime_application_logs": {
            "request_payload": {
                "prompt": "What are the best practices for database optimization?"
            },
            "resource_arn": "arn:aws:bedrock-agentcore:eu-west-2:892547316820:runtime/claudeserver-Xy7Mn5TqR3"
        }
    },
    "cloud": {
        "account": {
            "id": "892547316820"
        },
        "provider": "aws",
        "region": "eu-west-2",
        "service": {
            "name": "bedrock-agentcore"
        }
    },
    "data_stream": {
        "dataset": "aws_bedrock_agentcore.runtime_application_logs",
        "namespace": "default",
        "type": "logs"
    },
    "ecs": {
        "version": "8.11.0"
    },
    "elastic_agent": {
        "id": "2c4d6e8f-9a1b-4c3d-8e2f-7a9b3c5d1e6f",
        "snapshot": false,
        "version": "9.1.0"
    },
    "event": {
        "action": "InvokeAgentRuntime",
        "agent_id_status": "verified",
        "dataset": "aws_bedrock_agentcore.runtime_application_logs",
        "id": "78456123890742158963247856912345678901234567890123456789",
        "ingested": "2025-11-12T15:42:19Z",
        "outcome": "success"
    },
    "gen_ai": {
        "request": {
            "id": "78456123890742158963247856912345678901234567890123456789"
        },
        "response": {
            "timestamp": "2025-03-15T09:27:18.543Z"
        },
        "system": "aws"
    },
    "input": {
        "type": "aws-cloudwatch"
    },
    "log": {
        "file": {
            "path": "arn:aws:logs:eu-west-2:892547316820:log-group:/aws/vendedlogs/bedrock-agentcore/runtime/APPLICATION_LOGS/claudeserver-Xy7Mn5TqR3/BedrockAgentCoreRuntime_ApplicationLogs"
        }
    },
    "service": {
        "name": "AgentCoreCodeRuntime"
    },
    "session": {
        "id": "d4e7f2a8-9c3b-42e1-b5d6-8f3a7e9c2b4d"
    },
    "span": {
        "id": "a3b8c4d9e2f71856"
    },
    "tags": [
        "forwarded"
    ],
    "trace": {
        "id": "4f8a2e9c3d7b1f5e6a8c4b9d2e7f3a1c"
    }
}
```
**Exported fields**

| Field | Description | Type |
|---|---|---|
| @timestamp | Date/time when the event originated. This is the date/time extracted from the event, typically representing when the event was generated by the source. If the event source has no original timestamp, this value is typically populated by the first time the event was received by the pipeline. Required field for all events. | date |
| aws.cloudwatch.message | CloudWatch log message. | text |
| aws_bedrock_agentcore.runtime_application_logs.request_payload.prompt | The user prompt sent to the AgentCore runtime. | text |
| aws_bedrock_agentcore.runtime_application_logs.request_payload.prompt_hash | Hash of the user prompt for deduplication purposes. | text |
| aws_bedrock_agentcore.runtime_application_logs.resource_arn | The Amazon Resource Name (ARN) of the AgentCore runtime resource. | keyword |
| cloud.image.id | Image ID for the cloud instance. | keyword |
| data_stream.dataset | The field can contain anything that makes sense to signify the source of the data. Examples include `nginx.access`, `prometheus`, `endpoint` etc. For data streams that otherwise fit, but that do not have dataset set we use the value "generic" for the dataset value. `event.dataset` should have the same value as `data_stream.dataset`. Beyond the Elasticsearch data stream naming criteria noted above, the `dataset` value has additional restrictions:   \* Must not contain `-`   \* No longer than 100 characters | constant_keyword |
| data_stream.namespace | A user defined namespace. Namespaces are useful to allow grouping of data. Many users already organize their indices this way, and the data stream naming scheme now provides this best practice as a default. Many users will populate this field with `default`. If no value is used, it falls back to `default`. Beyond the Elasticsearch index naming criteria noted above, `namespace` value has the additional restrictions:   \* Must not contain `-`   \* No longer than 100 characters | constant_keyword |
| data_stream.type | An overarching type for the data stream. Currently allowed values are "logs" and "metrics". We expect to also add "traces" and "synthetics" in the near future. | constant_keyword |
| event.dataset | Event dataset | constant_keyword |
| event.module | Name of the module this data is coming from. If your monitoring agent supports the concept of modules or plugins to process events of a given source (e.g. Apache logs), `event.module` should contain the name of this module. | constant_keyword |
| gen_ai.request.id | Unique identifier for the request. | keyword |
| gen_ai.response.timestamp | Timestamp when the response was received. | date |
| gen_ai.system | Name of the AI system (aws). | keyword |
| host.containerized | If the host is a container. | boolean |
| host.os.build | OS build information. | keyword |
| host.os.codename | OS codename, if any. | keyword |
| input.type | Type of Filebeat input. | keyword |
| log.offset | Log offset | long |
| session.id |  | keyword |
