- name: mssql.database_replicas
  type: group
  fields:
    - name: metrics
      type: group
      fields:
        - name: server_name
          type: keyword
          description: SQL Server instance name where metrics were collected.
        - name: name
          type: keyword
          description: Availability group name.
        - name: group_id
          type: keyword
          description: Unique identifier (GUID) of the availability group.
        - name: replica_server_name
          type: keyword
          description: Server name of this replica.
        - name: database_name
          type: keyword
          description: Name of the database.
        - name: is_primary_replica
          type: boolean
          description: Whether this is the primary replica for the database.
        - name: synchronization_state
          type: long
          metric_type: gauge
          description: Database synchronization state (0 = NOT_SYNCHRONIZING, 1 = SYNCHRONIZING, 2 = SYNCHRONIZED).
        - name: synchronization_state_desc
          type: keyword
          description: Text description of database synchronization state.
        - name: synchronization_health
          type: long
          metric_type: gauge
          description: Database synchronization health (0 = NOT_HEALTHY, 1 = PARTIALLY_HEALTHY, 2 = HEALTHY).
        - name: synchronization_health_desc
          type: keyword
          description: Text description of database synchronization health.
        - name: is_suspended
          type: boolean
          description: Whether database synchronization is suspended.
        - name: log_send_queue_kb
          type: long
          metric_type: gauge
          description: Amount of log records waiting to be sent to secondary in KB.
        - name: log_send_rate_kbps
          type: long
          metric_type: gauge
          description: Rate at which log records are being sent in KB/sec.
        - name: redo_queue_kb
          type: long
          metric_type: gauge
          description: Amount of log records waiting to be redone on secondary in KB.
        - name: redo_rate_kbps
          type: long
          metric_type: gauge
          description: Rate at which log records are being redone in KB/sec.
        - name: secondary_lag_seconds
          type: long
          metric_type: gauge
          description: Seconds the secondary is behind the primary (RPO indicator).
        - name: last_commit_time
          type: date
          description: Timestamp of the last committed transaction on this replica.
    - name: query
      type: keyword
      description: The SQL queries executed.