---
description: Journald pipeline for system integration auth data stream
processors:
  - rename:
      field: journald.process.name
      target_field: process.name
      ignore_missing: true
  - convert:
      tag: convert_procid
      field: log.syslog.procid
      type: string
      ignore_missing: true
      if: ctx.log?.syslog?.procid != null
  - remove:
      description: Remove the extra fields added by the Journald input
      ignore_missing: true
      field:
        - journald
        - process.thread
        - syslog
        - systemd
        - message_id
  - pipeline:
      name: '{{ IngestPipeline "message" }}'
on_failure:
  - set:
      field: event.kind
      value: pipeline_error
  - set:
      field: error.message
      value: >-
        Processor '{{{ _ingest.on_failure_processor_type }}}'
        {{{#_ingest.on_failure_processor_tag}}}with tag '{{{ _ingest.on_failure_processor_tag }}}'
        {{{/_ingest.on_failure_processor_tag}}}failed with message '{{{ _ingest.on_failure_message }}}'
