FROM apache/kafka:4.0.0

USER root

# Copy jolokia agent jar from host into container
ADD jolokia/jolokia-jvm-2.3.0.jar /opt/jolokia/jolokia-jvm.jar

# Copy startup script
ADD scripts/start_metrics.sh /opt/startup.sh
ADD scripts/example_metric.sh /opt/example_metric.sh
RUN chmod +x /opt/startup.sh && chown -R 1001:0 /opt

USER 1001

ENTRYPOINT ["/opt/startup.sh"]
