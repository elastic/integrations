receivers:
  kafka:
    brokers:
{{#each brokers}}
      - {{this}}
{{/each}}
{{#if protocol_version}}
    protocol_version: "{{protocol_version}}"
{{/if}}
    resolve_canonical_bootstrap_servers_only: {{resolve_canonical_bootstrap_servers_only}}
{{#if group_id}}
    group_id: {{group_id}}
{{/if}}
{{#if client_id}}
    client_id: {{client_id}}
{{/if}}
{{#if rack_id}}
    rack_id: {{rack_id}}
{{/if}}
    use_leader_epoch: {{use_leader_epoch}}
{{#if initial_offset}}
    initial_offset: {{initial_offset}}
{{/if}}
{{#if session_timeout}}
    session_timeout: {{session_timeout}}
{{/if}}
{{#if heartbeat_interval}}
    heartbeat_interval: {{heartbeat_interval}}
{{/if}}
{{#if group_rebalance_strategy}}
    group_rebalance_strategy: {{group_rebalance_strategy}}
{{/if}}
{{#if group_instance_id}}
    group_instance_id: {{group_instance_id}}
{{/if}}
{{#if min_fetch_size}}
    min_fetch_size: {{min_fetch_size}}
{{/if}}
{{#if max_fetch_size}}
    max_fetch_size: {{max_fetch_size}}
{{/if}}
{{#if max_fetch_wait}}
    max_fetch_wait: {{max_fetch_wait}}
{{/if}}
{{#if max_partition_fetch_size}}
    max_partition_fetch_size: {{max_partition_fetch_size}}
{{/if}}
{{#if logs_topics}}
    logs:
      topics:
{{#each logs_topics}}
        - {{this}}
{{/each}}
{{#if logs_encoding}}
      encoding: {{logs_encoding}}
{{/if}}
{{#if logs_exclude_topics}}
      exclude_topics:
{{#each logs_exclude_topics}}
        - {{this}}
{{/each}}
{{/if}}
{{/if}}
{{#if metrics_topics}}
    metrics:
      topics:
{{#each metrics_topics}}
        - {{this}}
{{/each}}
{{#if metrics_encoding}}
      encoding: {{metrics_encoding}}
{{/if}}
{{#if metrics_exclude_topics}}
      exclude_topics:
{{#each metrics_exclude_topics}}
        - {{this}}
{{/each}}
{{/if}}
{{/if}}
{{#if traces_topics}}
    traces:
      topics:
{{#each traces_topics}}
        - {{this}}
{{/each}}
{{#if traces_encoding}}
      encoding: {{traces_encoding}}
{{/if}}
{{#if traces_exclude_topics}}
      exclude_topics:
{{#each traces_exclude_topics}}
        - {{this}}
{{/each}}
{{/if}}
{{/if}}
{{#if sasl_mechanism}}
    auth:
      sasl:
        mechanism: {{sasl_mechanism}}
{{#if sasl_username}}
        username: {{sasl_username}}
{{/if}}
{{#if sasl_password}}
        password: {{sasl_password}}
{{/if}}
{{#if sasl_aws_msk_region}}
        aws_msk:
          region: {{sasl_aws_msk_region}}
{{/if}}
{{/if}}
{{#if kerberos_service_name}}
    auth:
      kerberos:
        service_name: {{kerberos_service_name}}
{{#if kerberos_realm}}
        realm: {{kerberos_realm}}
{{/if}}
{{#if kerberos_username}}
        username: {{kerberos_username}}
{{/if}}
{{#if kerberos_password}}
        password: {{kerberos_password}}
{{/if}}
{{#if kerberos_config_file}}
        config_file: {{kerberos_config_file}}
{{/if}}
{{#if kerberos_keytab_file}}
        keytab_file: {{kerberos_keytab_file}}
{{/if}}
        use_keytab: {{kerberos_use_keytab}}
        disable_fast_negotiation: {{kerberos_disable_fast_negotiation}}
{{/if}}
{{#if tls_enabled}}
    tls:
      insecure: false
{{#if tls_ca_file}}
      ca_file: {{tls_ca_file}}
{{/if}}
{{#if tls_cert_file}}
      cert_file: {{tls_cert_file}}
{{/if}}
{{#if tls_key_file}}
      key_file: {{tls_key_file}}
{{/if}}
      insecure_skip_verify: {{tls_insecure_skip_verify}}
{{/if}}
    metadata:
      full: {{metadata_full}}
{{#if metadata_refresh_interval}}
      refresh_interval: {{metadata_refresh_interval}}
{{/if}}
      retry:
{{#if metadata_retry_max}}
        max: {{metadata_retry_max}}
{{/if}}
{{#if metadata_retry_backoff}}
        backoff: {{metadata_retry_backoff}}
{{/if}}
    autocommit:
      enable: {{autocommit_enable}}
{{#if autocommit_interval}}
      interval: {{autocommit_interval}}
{{/if}}
    message_marking:
      after: {{message_marking_after}}
      on_error: {{message_marking_on_error}}
{{#if message_marking_on_permanent_error}}
      on_permanent_error: {{message_marking_on_permanent_error}}
{{/if}}
{{#if header_extraction_extract_headers}}
    header_extraction:
      extract_headers: {{header_extraction_extract_headers}}
{{#if header_extraction_headers}}
      headers:
{{#each header_extraction_headers}}
        - {{this}}
{{/each}}
{{/if}}
{{/if}}
{{#if telemetry}}
    telemetry: {{telemetry}}
{{/if}}
{{#if error_backoff}}
    error_backoff: {{error_backoff}}
{{/if}}
processors:
  resourcedetection/system:
    detectors: ["system"]
service:
  pipelines:
    logs:
      receivers: [kafka]
      processors: [resourcedetection/system]
    metrics:
      receivers: [kafka]
      processors: [resourcedetection/system]
    traces:
      receivers: [kafka]
      processors: [resourcedetection/system]
