{
    "attributes": {
        "name": "PostgreSQL transaction error rate",
        "description": "This SLO monitors the rate of PostgreSQL transaction errors caused if activity state in database is idle in transaction (aborted).",
        "indicator": {
            "type": "sli.kql.custom",
            "params": {
                "index": "metrics-*",
                "filter": {
                    "filters": [],
                    "kqlQuery": "data_stream.dataset : \"postgresql.activity\" and NOT error.message : *"
                },
                "good": "NOT postgresql.activity.state : \"idle in transaction (aborted)\"",        
                "total": "postgresql.activity.state : * ",
                "timestampField": "@timestamp",
                "dataViewId": "metrics-*"
            }
        },
        "budgetingMethod": "occurrences",
        "timeWindow": {
            "duration": "7d",
            "type": "rolling"
        },
        "objective": {
            "target": 0.99
        },
        "tags": [],
        "groupBy": [
            "*"
        ],
        "settings": {
            "preventInitialBackfill": false
        }
    },
    "id": "postgresql-3ac836a7-3f31-4969-8498-1abe7beee59b",
    "references": [],
    "type": "slo"
}