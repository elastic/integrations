type: metrics
title: Azure monitor metrics
release: experimental
streams:
  - input: azure/metrics
    vars:
      - name: client_id
        type: text
        title: Client Id
        multi: false
        required: true
        show_user: true
        default: ${AZURE_CLIENT_ID:""}
      - name: client_secret
        type: text
        title: Client Secret
        multi: false
        required: true
        show_user: true
        default: ${AZURE_CLIENT_SECRET:""}
      - name: period
        type: text
        title: Period
        multi: false
        required: true
        show_user: true
        default: 300s
      - name: refresh_list_interval
        type: text
        title: Refresh List Interval
        multi: false
        required: true
        show_user: true
        default: 600s
      - name: resources
        type: yaml
        title: Resources
        multi: false
        required: true
        show_user: true
        default: |
          - metrics:
            - name:
              - DataUsage
              - DocumentCount
              - DocumentQuota
              namespace: Microsoft.DocumentDb/databaseAccounts
            resource_query: resourceType eq 'Microsoft.DocumentDb/databaseAccounts'
      - name: subscription_id
        type: text
        title: Subscription Id
        multi: false
        required: true
        show_user: true
        default: ${AZURE_SUBSCRIPTION_ID:""}
      - name: tenant_id
        type: text
        title: Tenant Id
        multi: false
        required: true
        show_user: true
        default: ${AZURE_TENANT_ID:""}
    title: Azure monitor metrics
    description: Collect Azure monitor metrics
