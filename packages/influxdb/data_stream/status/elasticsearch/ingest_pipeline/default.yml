---
description: Pipeline for Influxdb status metrics
processors:
    - rename:
        field: prometheus.metrics
        target_field: influxdb.status
        ignore_missing: true
        ignore_failure: true
    - remove:
        field: prometheus.labels.compiler_type
        ignore_missing: true
        ignore_failure: true
    - remove:
        field: prometheus.labels.job
        ignore_missing: true
        ignore_failure: true
    - remove:
        field: prometheus.labels.id
        ignore_missing: true
        ignore_failure: true
    - remove:
        field: prometheus.labels.level
        ignore_missing: true
        ignore_failure: true
    - remove:
        field: prometheus.labels.engine
        ignore_missing: true
        ignore_failure: true
    - remove:
        field: prometheus.labels.method
        ignore_failure: true
        ignore_missing: true
    - remove:
        field: prometheus.labels.path
        ignore_failure: true
        ignore_missing: true
    - remove:
        field: prometheus.labels.response_code
        ignore_failure: true
        ignore_missing: true
    - remove:
        field: prometheus.labels.status
        ignore_failure: true
        ignore_missing: true
    - remove:
        field: prometheus.labels.user_agent
        ignore_failure: true
        ignore_missing: true
    - remove:
        field: prometheus.labels.handler
        ignore_missing: true
        ignore_failure: true
    - rename:
        field: prometheus.labels.instance
        target_field: influxdb.status.instance
        ignore_failure: true
        ignore_missing: true
on_failure:
- set:
    field: error.message
    value: "{{ _ingest.on_failure_message }}"
