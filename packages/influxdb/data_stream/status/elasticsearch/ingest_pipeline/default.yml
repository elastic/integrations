---
    description: Pipeline for Influxdb status metrics
    processors:
        - rename:
            field: prometheus.metrics
            target_field: influxdb.status
            ignore_missing: true
            ignore_failure: true
        - remove:
            field: [prometheus.labels.compiler_type, prometheus.labels.job, prometheus.labels.id, prometheus.labels.level, prometheus.labels.engine, prometheus.labels.user_agent, prometheus.labels.handler, prometheus.labels.task_type]
            ignore_missing: true
            ignore_failure: true
        - rename:
            field: influxdb.status.go_memstats_alloc_bytes
            target_field: influxdb.status.go_runtime.memstats_alloc_bytes
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: influxdb.status.go_memstats_alloc_bytes_total
            target_field: influxdb.status.go_runtime.memstats_alloc_bytes_total
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: influxdb.status.go_memstats_heap_alloc_bytes
            target_field: influxdb.status.go_runtime.memstats_heap_alloc_bytes
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: influxdb.status.go_memstats_heap_idle_bytes
            target_field: influxdb.status.go_runtime.memstats_heap_idle_bytes
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: influxdb.status.go_memstats_heap_inuse_bytes
            target_field: influxdb.status.go_runtime.memstats_heap_inuse_bytes
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: influxdb.status.go_threads
            target_field: influxdb.status.go_runtime.threads
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: influxdb.status.qc_all_active
            target_field: influxdb.status.query_controller.all_active
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: influxdb.status.qc_compiling_active
            target_field: influxdb.status.query_controller.compiling_active
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: influxdb.status.qc_executing_active
            target_field: influxdb.status.query_controller.executing_active
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: influxdb.status.storage_bucket_measurement_num
            target_field: influxdb.status.storage.bucket_measurement_num
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: influxdb.status.storage_bucket_series_num
            target_field: influxdb.status.storage.bucket_series_num
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: influxdb.status.storage_compactions_failed
            target_field: influxdb.status.storage.compactions_failed
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: influxdb.status.storage_shard_disk_size
            target_field: influxdb.status.storage.shard_disk_size
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: influxdb.status.storage_shard_write_count
            target_field: influxdb.status.storage.shard_write_count
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: influxdb.status.storage_shard_write_dropped_sum
            target_field: influxdb.status.storage.shard_write_dropped_sum
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: influxdb.status.storage_shard_write_err_count
            target_field: influxdb.status.storage.shard_write_err_count
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: influxdb.status.storage_tsm_files_disk_bytes
            target_field: influxdb.status.storage.tsm_files_disk_bytes
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: influxdb.status.storage_tsm_files_total
            target_field: influxdb.status.storage.tsm_files_total
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: influxdb.status.storage_wal_size
            target_field: influxdb.status.storage.wal_size
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: influxdb.status.storage_wal_writes
            target_field: influxdb.status.storage.wal_writes
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: influxdb.status.storage_wal_writes_err
            target_field: influxdb.status.storage.wal_writes_err
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: influxdb.status.storage_writer_timeouts
            target_field: influxdb.status.storage.writer_timeouts
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: influxdb.status.task_executor_errors_counter
            target_field: influxdb.status.tasks.executor_errors_counter
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: influxdb.status.task_executor_total_runs_active
            target_field: influxdb.status.tasks.executor_total_runs_active
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: influxdb.status.task_executor_total_runs_complete
            target_field: influxdb.status.tasks.executor_total_runs_complete
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: influxdb.status.task_executor_workers_busy
            target_field: influxdb.status.tasks.executor_workers_busy
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: influxdb.status.task_scheduler_current_execution
            target_field: influxdb.status.tasks.scheduler_current_execution
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: influxdb.status.task_scheduler_total_execute_failure
            target_field: influxdb.status.tasks.scheduler_total_execute_failure
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: influxdb.status.task_scheduler_total_execution_calls
            target_field: influxdb.status.tasks.scheduler_total_execution_calls
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: influxdb.status.task_scheduler_total_release_calls
            target_field: influxdb.status.tasks.scheduler_total_release_calls
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: influxdb.status.task_scheduler_total_schedule_calls
            target_field: influxdb.status.tasks.scheduler_total_schedule_calls
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: influxdb.status.task_scheduler_total_schedule_fails
            target_field: influxdb.status.tasks.scheduler_total_schedule_fails
            ignore_failure: true
            ignore_missing: true
        - rename:
            field: prometheus.labels.instance
            target_field: influxdb.status.instance
            ignore_missing: true
        - rename:
            field: prometheus.labels.method
            target_field: influxdb.status.http_api.method
            ignore_missing: true
        - rename:
            field: prometheus.labels.path
            target_field: influxdb.status.http_api.path
            ignore_missing: true
        - rename:
            field: prometheus.labels.status
            target_field: influxdb.status.http_api.http_status
            ignore_missing: true
        - rename:
            field: prometheus.labels.response_code
            target_field: influxdb.status.http_api.response_code
            ignore_missing: true
        - rename:
            field: influxdb.status.influxdb_buckets_total
            target_field: influxdb.status.buckets_total
            ignore_missing: true
        - rename:  
            field: influxdb.status.influxdb_dashboards_total
            target_field: influxdb.status.dashboards_total
            ignore_missing: true
        - rename:  
            field: influxdb.status.influxdb_organizations_total
            target_field: influxdb.status.organizations_total
            ignore_missing: true
        - rename:  
            field: influxdb.status.influxdb_scrapers_total
            target_field: influxdb.status.scrapers_total
            ignore_missing: true
        - rename:  
            field: influxdb.status.influxdb_tokens_total
            target_field: influxdb.status.tokens_total
            ignore_missing: true
        - rename:  
            field: influxdb.status.influxdb_uptime_seconds
            target_field: influxdb.status.uptime_seconds
            ignore_missing: true
        - rename:  
            field: influxdb.status.influxdb_users_total
            target_field: influxdb.status.users_total
            ignore_missing: true
        - rename:   
            field: prometheus.labels.org
            target_field: influxdb.status.org
            ignore_missing: true
    on_failure:
    - set:
        field: error.message
        value: "{{ _ingest.on_failure_message }}"
    